/** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20130512
*/
/** @license
	Animator.js 1.1.9
	
	This library is released under the BSD license:

	Copyright (c) 2006, Bernard Sumption. All rights reserved.
	
	Redistribution and use in source and binary forms, with or without
	modification, are permitted provided that the following conditions are met:
	
	Redistributions of source code must retain the above copyright notice, this
	list of conditions and the following disclaimer. Redistributions in binary
	form must reproduce the above copyright notice, this list of conditions and
	the following disclaimer in the documentation and/or other materials
	provided with the distribution. Neither the name BernieCode nor
	the names of its contributors may be used to endorse or promote products
	derived from this software without specific prior written permission. 
	
	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
	AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
	ARE DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE FOR
	ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
	DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
	SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
	CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
	LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
	OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
	DAMAGE.

*/
function Animator(e){this.setOptions(e);var t=this;this.timerDelegate=function(){t.onTimerEvent()},this.subjects=[],this.subjectScopes=[],this.target=0,this.state=0,this.lastTime=null}function NumericalStyleSubject(e,t,i,n,s){this.els=Animator.makeArray(e),this.property="opacity"==t&&window.ActiveXObject?"filter":Animator.camelize(t),this.from=parseFloat(i),this.to=parseFloat(n),this.units=null!=s?s:"px"}function ColorStyleSubject(e,t,i,n){this.els=Animator.makeArray(e),this.property=Animator.camelize(t),this.to=this.expandColor(n),this.from=this.expandColor(i),this.origFrom=i,this.origTo=n}function DiscreteStyleSubject(e,t,i,n,s){this.els=Animator.makeArray(e),this.property=Animator.camelize(t),this.from=i,this.to=n,this.threshold=s||.5}function CSSStyleSubject(e,t,i){if(e=Animator.makeArray(e),this.subjects=[],0!=e.length){var n,s,r;if(i)r=this.parseStyle(t,e[0]),s=this.parseStyle(i,e[0]);else{s=this.parseStyle(t,e[0]),r={};for(n in s)r[n]=CSSStyleSubject.getStyle(e[0],n)}var n;for(n in r)r[n]==s[n]&&(delete r[n],delete s[n]);var n,o,a,l,c,d;for(n in r){var u=String(r[n]),h=String(s[n]);if(null!=s[n]){if(c=ColorStyleSubject.parseColor(u))d=ColorStyleSubject.parseColor(h),l=ColorStyleSubject;else if(u.match(CSSStyleSubject.numericalRe)&&h.match(CSSStyleSubject.numericalRe)){c=parseFloat(u),d=parseFloat(h),l=NumericalStyleSubject,a=CSSStyleSubject.numericalRe.exec(u);var p=CSSStyleSubject.numericalRe.exec(h);o=null!=a[1]?a[1]:null!=p[1]?p[1]:p}else{if(!u.match(CSSStyleSubject.discreteRe)||!h.match(CSSStyleSubject.discreteRe)){window.DEBUG&&alert("Unrecognised format for value of "+n+": '"+r[n]+"'");continue}c=u,d=h,l=DiscreteStyleSubject,o=0}this.subjects[this.subjects.length]=new l(e,n,c,d,o)}else window.DEBUG&&alert("No to style provided for '"+n+'"')}}}function AnimatorChain(e,t){this.animators=e,this.setOptions(t);for(var i=0;i<this.animators.length;i++)this.listenTo(this.animators[i]);this.forwards=!1,this.current=0}function Accordion(e){this.setOptions(e);var t,i=this.options.initialSection;this.options.rememberance&&(t=document.location.hash.substring(1)),this.rememberanceTexts=[],this.ans=[];for(var n=this,s=0;s<this.options.sections.length;s++){var r=this.options.sections[s],o=new Animator(this.options.animatorOptions),a=this.options.from+this.options.shift*s,l=this.options.to+this.options.shift*s;o.addSubject(new NumericalStyleSubject(r,this.options.property,a,l,this.options.units)),o.jumpTo(0);var c=this.options.getActivator(r);c.index=s,c.onclick=function(){n.show(this.index)},this.ans[this.ans.length]=o,this.rememberanceTexts[s]=c.innerHTML.replace(/\s/g,""),this.rememberanceTexts[s]===t&&(i=s)}this.show(i)}!function(e,t){function i(i,n){function s(e){return ft.preferFlash&&at&&!ft.ignoreFlash&&ft.flash[e]!==t&&ft.flash[e]}function r(e){return function(t){var i=this._s;return i&&i._a?t=e.call(this,t):(i&&i.id?ft._wD(i.id+": Ignoring "+t.type):ft._wD(_t+"Ignoring "+t.type),t=null),t}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var o,a,l,c,d,u,h,p,f,m,g,_,v,y,b,k,w,C,A,x,T,S,M,N,E,D,O,R,I,L,j,P,F,z,H,$,B,q,Q,W,U,V,X,G,Y,K,J,Z,et,tt,it,nt,st,rt,ot,at,lt,ct,dt,ut,ht,pt,ft=this,mt=null,gt=null,_t="HTML5::",vt=navigator.userAgent,yt=e.location.href.toString(),bt=document,kt=[],wt=!0,Ct=!1,At=!1,xt=!1,Tt=!1,St=!1,Mt=0,Nt=["log","info","warn","error"],Et=null,Dt=null,Ot=!1,Rt=!1,It=0,Lt=null,jt=[],Pt=null,Ft=Array.prototype.slice,zt=!1,Ht=0,$t=vt.match(/(ipad|iphone|ipod)/i),Bt=vt.match(/android/i),qt=vt.match(/msie/i),Qt=vt.match(/webkit/i),Wt=vt.match(/safari/i)&&!vt.match(/chrome/i),Ut=vt.match(/opera/i),Vt=vt.match(/firefox/i),Xt=vt.match(/(mobile|pre\/|xoom)/i)||$t||Bt,Gt=!yt.match(/usehtml5audio/i)&&!yt.match(/sm2\-ignorebadua/i)&&Wt&&!vt.match(/silk/i)&&vt.match(/OS X 10_6_([3-7])/i),Yt=e.console!==t&&console.log!==t,Kt=bt.hasFocus!==t?bt.hasFocus():null,Jt=Wt&&(bt.hasFocus===t||!bt.hasFocus()),Zt=!Jt,ei=/(mp3|mp4|mpa|m4a|m4b)/i,ti=bt.location?bt.location.protocol.match(/http/i):null,ii=ti?"":"http://",ni=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,si="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),ri=RegExp("\\.("+si.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ti;var oi;try{oi=Audio!==t&&(Ut&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(ai){oi=!1}this.hasHTML5=oi,this.setup=function(e){var i=!ft.url;return e!==t&&xt&&Pt&&ft.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&W(z("setupLate")),g(e),e&&(i&&E&&e.url!==t&&ft.beginDelayedInit(),!E&&e.url!==t&&"complete"===bt.readyState&&setTimeout(M,1)),ft},this.supported=this.ok=function(){return Pt?xt&&!Tt:ft.useHTML5Audio&&ft.hasHTML5},this.getMovie=function(t){return a(t)||bt[t]||e[t]},this.createSound=function(e,i){function n(){return r=q(r),ft.sounds[r.id]=new o(r),ft.soundIDs.push(r.id),ft.sounds[r.id]}var s,r;if(s=null,s="soundManager.createSound(): "+z(xt?"notOK":"notReady"),!xt||!ft.ok())return W(s),!1;if(i!==t&&(e={id:e,url:i}),r=m(e),r.url=Y(r.url),void 0===r.id&&(r.id=ft.setupOptions.idPrefix+Ht++),r.id.toString().charAt(0).match(/^[0-9]$/)&&ft._wD("soundManager.createSound(): "+z("badID",r.id),2),ft._wD("soundManager.createSound(): "+r.id+(r.url?" ("+r.url+")":""),1),U(r.id,!0))return ft._wD("soundManager.createSound(): "+r.id+" exists",1),ft.sounds[r.id];if(Z(r))s=n(),ft._wD(r.id+": Using HTML5"),s._setup_html5(r);else{if(ft.html5Only)return ft._wD(r.id+": No HTML5 support for this sound, and no Flash. Exiting."),n();if(ft.html5.usingFlash&&r.url&&r.url.match(/data\:/i))return ft._wD(r.id+": data: URIs not supported via Flash. Exiting."),n();u>8&&(null===r.isMovieStar&&(r.isMovieStar=!!(r.serverURL||r.type&&r.type.match(ni)||r.url&&r.url.match(ri))),r.isMovieStar&&(ft._wD("soundManager.createSound(): using MovieStar handling"),1<r.loops&&p("noNSLoop"))),r=Q(r,"soundManager.createSound(): "),s=n(),8===u?gt._createSound(r.id,r.loops||1,r.usePolicyFile):(gt._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:!1,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,!0,r.autoLoad,r.usePolicyFile),r.serverURL||(s.connected=!0,r.onconnect&&r.onconnect.apply(s))),!r.serverURL&&(r.autoLoad||r.autoPlay)&&s.load(r)}return!r.serverURL&&r.autoPlay&&s.play(),s},this.destroySound=function(e,t){if(!U(e))return!1;var i,n=ft.sounds[e];for(n._iO={},n.stop(),n.unload(),i=0;i<ft.soundIDs.length;i++)if(ft.soundIDs[i]===e){ft.soundIDs.splice(i,1);break}return t||n.destruct(!0),delete ft.sounds[e],!0},this.load=function(e,t){return U(e)?ft.sounds[e].load(t):!1},this.unload=function(e){return U(e)?ft.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,t,i,n){return U(e)?ft.sounds[e].onposition(t,i,n):!1},this.clearOnPosition=function(e,t,i){return U(e)?ft.sounds[e].clearOnPosition(t,i):!1},this.start=this.play=function(e,t){var i=null,n=t&&!(t instanceof Object);if(!xt||!ft.ok())return W("soundManager.play(): "+z(xt?"notOK":"notReady")),!1;if(U(e,n))n&&(t={url:t});else{if(!n)return!1;n&&(t={url:t}),t&&t.url&&(ft._wD('soundManager.play(): Attempting to create "'+e+'"',1),t.id=e,i=ft.createSound(t).play())}return null===i&&(i=ft.sounds[e].play(t)),i},this.setPosition=function(e,t){return U(e)?ft.sounds[e].setPosition(t):!1},this.stop=function(e){return U(e)?(ft._wD("soundManager.stop("+e+")",1),ft.sounds[e].stop()):!1},this.stopAll=function(){var e;ft._wD("soundManager.stopAll()",1);for(e in ft.sounds)ft.sounds.hasOwnProperty(e)&&ft.sounds[e].stop()},this.pause=function(e){return U(e)?ft.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].pause()},this.resume=function(e){return U(e)?ft.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].resume()},this.togglePause=function(e){return U(e)?ft.sounds[e].togglePause():!1},this.setPan=function(e,t){return U(e)?ft.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return U(e)?ft.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return U(e)?(ft._wD('soundManager.mute(): Muting "'+e+'"'),ft.sounds[e].mute()):!1;for(ft._wD("soundManager.mute(): Muting all sounds"),t=ft.soundIDs.length-1;t>=0;t--)ft.sounds[ft.soundIDs[t]].mute();return ft.muted=!0},this.muteAll=function(){ft.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return U(e)?(ft._wD('soundManager.unmute(): Unmuting "'+e+'"'),ft.sounds[e].unmute()):!1;for(ft._wD("soundManager.unmute(): Unmuting all sounds"),e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].unmute();return ft.muted=!1,!0},this.unmuteAll=function(){ft.unmute()},this.toggleMute=function(e){return U(e)?ft.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return gt&&8!==u&&(e=parseInt(gt._getMemoryUse(),10)),e},this.disable=function(i){var n;if(i===t&&(i=!1),Tt)return!1;for(Tt=!0,p("shutdown",1),n=ft.soundIDs.length-1;n>=0;n--)j(ft.sounds[ft.soundIDs[n]]);return f(i),rt.remove(e,"load",b),!0},this.canPlayMIME=function(e){var t;return ft.hasHTML5&&(t=et({type:e})),!t&&Pt&&(t=e&&ft.ok()?!!(u>8&&e.match(ni)||e.match(ft.mimePattern)):null),t},this.canPlayURL=function(e){var t;return ft.hasHTML5&&(t=et({url:e})),!t&&Pt&&(t=e&&ft.ok()?!!e.match(ft.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&ft.canPlayMIME(e.type)?!0:ft.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var i=ft.sounds[e];return!i&&!t&&ft._wD('soundManager.getSoundById(): Sound "'+e+'" not found.',2),i},this.onready=function(t,i){if("function"!=typeof t)throw z("needFunction","onready");return xt&&ft._wD(z("queue","onready")),i||(i=e),v("onready",t,i),y(),!0},this.ontimeout=function(t,i){if("function"!=typeof t)throw z("needFunction","ontimeout");return xt&&ft._wD(z("queue","ontimeout")),i||(i=e),v("ontimeout",t,i),y({type:"ontimeout"}),!0},this._writeDebug=function(e,i){var n,s;return ft.debugMode?Yt&&ft.useConsole&&(i&&"object"==typeof i?console.log(e,i):Nt[i]!==t?console[Nt[i]](e):console.log(e),ft.consoleOnly)?!0:(n=a("soundmanager-debug"))?(s=bt.createElement("div"),0===++Mt%2&&(s.className="sm2-alt"),i=i===t?0:parseInt(i,10),s.appendChild(bt.createTextNode(e)),i&&(i>=2&&(s.style.fontWeight="bold"),3===i&&(s.style.color="#ff3333")),n.insertBefore(s,n.firstChild),!0):!1:!1},-1!==yt.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(p("currentObj",1),e=0,t=ft.soundIDs.length;t>e;e++)ft.sounds[ft.soundIDs[e]]._debug()},this.reboot=function(t,i){ft.soundIDs.length&&ft._wD("Destroying "+ft.soundIDs.length+" SMSound object"+(1!==ft.soundIDs.length?"s":"")+"...");var n,s,r;for(n=ft.soundIDs.length-1;n>=0;n--)ft.sounds[ft.soundIDs[n]].destruct();if(gt)try{qt&&(Dt=gt.innerHTML),Et=gt.parentNode.removeChild(gt)}catch(o){p("badRemove",2)}if(Dt=Et=Pt=gt=null,ft.enabled=E=xt=Ot=Rt=Ct=At=Tt=zt=ft.swfLoaded=!1,ft.soundIDs=[],ft.sounds={},Ht=0,t)kt=[];else for(n in kt)if(kt.hasOwnProperty(n))for(s=0,r=kt[n].length;r>s;s++)kt[n][s].fired=!1;return i||ft._wD("soundManager: Rebooting..."),ft.html5={usingFlash:null},ft.flash={},ft.html5Only=!1,ft.ignoreFlash=!1,e.setTimeout(function(){S(),i||ft.beginDelayedInit()},20),ft},this.reset=function(){return p("reset"),ft.reboot(!0,!0)},this.getMoviePercent=function(){return gt&&"PercentLoaded"in gt?gt.PercentLoaded():null},this.beginDelayedInit=function(){St=!0,M(),setTimeout(function(){return Rt?!1:(O(),T(),Rt=!0)},20),k()},this.destruct=function(){ft._wD("soundManager.destruct()"),ft.disable(!0)},o=function(e){var i,n,s,r,o,a,l,c,d,f,g,_=this,v=!1,y=[],b=0,k=null;n=i=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=m(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,g=this.url?!1:!0,this.id3={},this._debug=function(){ft._wD(_.id+": Merged options:",_.options)},this.load=function(e){var i,n=null;if(e!==t?_._iO=m(e,_.options):(e=_.options,_._iO=e,k&&k!==_.url&&(p("manURL"),_._iO.url=_.url,_.url=null)),_._iO.url||(_._iO.url=_.url),_._iO.url=Y(_._iO.url),i=_.instanceOptions=_._iO,ft._wD(_.id+": load ("+i.url+")"),!i.url&&!_.url)return ft._wD(_.id+": load(): url is unassigned. Exiting.",2),_;if(!_.isHTML5&&8===u&&!_.url&&!i.autoPlay&&ft._wD(_.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),i.url===_.url&&0!==_.readyState&&2!==_.readyState)return p("onURL",1),3===_.readyState&&i.onload&&pt(_,function(){i.onload.apply(_,[!!_.duration])}),_;if(_.loaded=!1,_.readyState=1,_.playState=0,_.id3={},Z(i))n=_._setup_html5(i),n._called_load?ft._wD(_.id+": Ignoring request to load again"):(_._html5_canplay=!1,_.url!==i.url&&(ft._wD(p("manURL")+": "+i.url),_._a.src=i.url,_.setPosition(0)),_._a.autobuffer="auto",_._a.preload="auto",_._a._called_load=!0,i.autoPlay&&_.play());else{if(ft.html5Only)return ft._wD(_.id+": No flash support. Exiting."),_;if(_._iO.url&&_._iO.url.match(/data\:/i))return ft._wD(_.id+": data: URIs not supported via Flash. Exiting."),_;try{_.isHTML5=!1,_._iO=Q(q(i)),i=_._iO,8===u?gt._load(_.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):gt._load(_.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(s){p("smError",2),h("onload",!1),R({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return _.url=i.url,_},this.unload=function(){return 0!==_.readyState&&(ft._wD(_.id+": unload()"),_.isHTML5?(a(),_._a&&(_._a.pause(),k=it(_._a))):8===u?gt._unload(_.id,"about:blank"):gt._unload(_.id),s()),_},this.destruct=function(e){ft._wD(_.id+": Destruct"),_.isHTML5?(a(),_._a&&(_._a.pause(),it(_._a),zt||o(),_._a._s=null,_._a=null)):(_._iO.onfailure=null,gt._destroySound(_.id)),e||ft.destroySound(_.id,!0)},this.start=this.play=function(e,i){var n,s,r,o,a,d=!0,d=null;if(n=_.id+": play(): ",i=i===t?!0:i,e||(e={}),_.url&&(_._iO.url=_.url),_._iO=m(_._iO,_.options),_._iO=m(e,_._iO),_._iO.url=Y(_._iO.url),_.instanceOptions=_._iO,!_.isHTML5&&_._iO.serverURL&&!_.connected)return _.getAutoPlay()||(ft._wD(n+" Netstream not connected yet - setting autoPlay"),_.setAutoPlay(!0)),_;if(Z(_._iO)&&(_._setup_html5(_._iO),l()),1===_.playState&&!_.paused&&((s=_._iO.multiShot)?ft._wD(n+"Already playing (multi-shot)",1):(ft._wD(n+"Already playing (one-shot)",1),_.isHTML5&&_.setPosition(_._iO.position),d=_)),null!==d)return d;if(e.url&&e.url!==_.url&&(_.readyState||_.isHTML5||8!==u||!g?_.load(_._iO):g=!1),_.loaded?ft._wD(n.substr(0,n.lastIndexOf(":"))):0===_.readyState?(ft._wD(n+"Attempting to load"),_.isHTML5||ft.html5Only?_.isHTML5?_.load(_._iO):(ft._wD(n+"Unsupported type. Exiting."),d=_):(_._iO.autoPlay=!0,_.load(_._iO)),_.instanceOptions=_._iO):2===_.readyState?(ft._wD(n+"Could not load - exiting",2),d=_):ft._wD(n+"Loading - attempting to play..."),null!==d)return d;if(!_.isHTML5&&9===u&&0<_.position&&_.position===_.duration&&(ft._wD(n+"Sound at end, resetting to position:0"),e.position=0),_.paused&&0<=_.position&&(!_._iO.serverURL||0<_.position))ft._wD(n+"Resuming from paused state",1),_.resume();else{if(_._iO=m(e,_._iO),null!==_._iO.from&&null!==_._iO.to&&0===_.instanceCount&&0===_.playState&&!_._iO.serverURL){if(s=function(){_._iO=m(e,_._iO),_.play(_._iO)},_.isHTML5&&!_._html5_canplay?(ft._wD(n+"Beginning load for from/to case"),_.load({oncanplay:s}),d=!1):_.isHTML5||_.loaded||_.readyState&&2===_.readyState||(ft._wD(n+"Preloading for from/to case"),_.load({onload:s}),d=!1),null!==d)return d;_._iO=f()}(!_.instanceCount||_._iO.multiShotEvents||_.isHTML5&&_._iO.multiShot&&!zt||!_.isHTML5&&u>8&&!_.getAutoPlay())&&_.instanceCount++,_._iO.onposition&&0===_.playState&&c(_),_.playState=1,_.paused=!1,_.position=_._iO.position===t||isNaN(_._iO.position)?0:_._iO.position,_.isHTML5||(_._iO=Q(q(_._iO))),_._iO.onplay&&i&&(_._iO.onplay.apply(_),v=!0),_.setVolume(_._iO.volume,!0),_.setPan(_._iO.pan,!0),_.isHTML5?2>_.instanceCount?(l(),n=_._setup_html5(),_.setPosition(_._iO.position),n.play()):(ft._wD(_.id+": Cloning Audio() for instance #"+_.instanceCount+"..."),r=new Audio(_._iO.url),o=function(){rt.remove(r,"onended",o),_._onfinish(_),it(r),r=null},a=function(){rt.remove(r,"canplay",a);try{r.currentTime=_._iO.position/1e3}catch(e){W(_.id+": multiShot play() failed to apply position of "+_._iO.position/1e3)}r.play()},rt.add(r,"ended",o),_._iO.position?rt.add(r,"canplay",a):r.play()):(d=gt._start(_.id,_._iO.loops||1,9===u?_.position:_.position/1e3,_._iO.multiShot||!1),9===u&&!d&&(ft._wD(n+"No sound hardware, or 32-sound ceiling hit",2),_._iO.onplayerror&&_._iO.onplayerror.apply(_)))}return _},this.stop=function(e){var t=_._iO;return 1===_.playState&&(ft._wD(_.id+": stop()"),_._onbufferchange(0),_._resetOnPosition(0),_.paused=!1,_.isHTML5||(_.playState=0),d(),t.to&&_.clearOnPosition(t.to),_.isHTML5?_._a&&(e=_.position,_.setPosition(0),_.position=e,_._a.pause(),_.playState=0,_._onTimer(),a()):(gt._stop(_.id,e),t.serverURL&&_.unload()),_.instanceCount=0,_._iO={},t.onstop&&t.onstop.apply(_)),_},this.setAutoPlay=function(e){ft._wD(_.id+": Autoplay turned "+(e?"on":"off")),_._iO.autoPlay=e,_.isHTML5||(gt._setAutoPlay(_.id,e),e&&!_.instanceCount&&1===_.readyState&&(_.instanceCount++,ft._wD(_.id+": Incremented instance count to "+_.instanceCount)))},this.getAutoPlay=function(){return _._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var i=_.isHTML5?Math.max(e,0):Math.min(_.duration||_._iO.duration,Math.max(e,0));if(_.position=i,e=_.position/1e3,_._resetOnPosition(_.position),_._iO.position=i,_.isHTML5){if(_._a){if(_._html5_canplay){if(_._a.currentTime!==e){ft._wD(_.id+": setPosition("+e+")");try{_._a.currentTime=e,(0===_.playState||_.paused)&&_._a.pause()}catch(n){ft._wD(_.id+": setPosition("+e+") failed: "+n.message,2)}}}else if(e)return ft._wD(_.id+": setPosition("+e+"): Cannot seek yet, sound not ready",2),_;_.paused&&_._onTimer(!0)}}else e=9===u?_.position:e,_.readyState&&2!==_.readyState&&gt._setPosition(_.id,e,_.paused||!_.playState,_._iO.multiShot);return _},this.pause=function(e){return _.paused||0===_.playState&&1!==_.readyState?_:(ft._wD(_.id+": pause()"),_.paused=!0,_.isHTML5?(_._setup_html5().pause(),a()):(e||e===t)&&gt._pause(_.id,_._iO.multiShot),_._iO.onpause&&_._iO.onpause.apply(_),_)},this.resume=function(){var e=_._iO;return _.paused?(ft._wD(_.id+": resume()"),_.paused=!1,_.playState=1,_.isHTML5?(_._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&_.setPosition(_.position),gt._pause(_.id,e.multiShot)),!v&&e.onplay?(e.onplay.apply(_),v=!0):e.onresume&&e.onresume.apply(_),_):_},this.togglePause=function(){return ft._wD(_.id+": togglePause()"),0===_.playState?(_.play({position:9!==u||_.isHTML5?_.position/1e3:_.position}),_):(_.paused?_.resume():_.pause(),_)},this.setPan=function(e,i){return e===t&&(e=0),i===t&&(i=!1),_.isHTML5||gt._setPan(_.id,e),_._iO.pan=e,i||(_.pan=e,_.options.pan=e),_},this.setVolume=function(e,i){return e===t&&(e=100),i===t&&(i=!1),_.isHTML5?_._a&&(_._a.volume=Math.max(0,Math.min(1,e/100))):gt._setVolume(_.id,ft.muted&&!_.muted||_.muted?0:e),_._iO.volume=e,i||(_.volume=e,_.options.volume=e),_},this.mute=function(){return _.muted=!0,_.isHTML5?_._a&&(_._a.muted=!0):gt._setVolume(_.id,0),_},this.unmute=function(){_.muted=!1;var e=_._iO.volume!==t;return _.isHTML5?_._a&&(_._a.muted=!1):gt._setVolume(_.id,e?_._iO.volume:_.options.volume),_},this.toggleMute=function(){return _.muted?_.unmute():_.mute()},this.onposition=this.onPosition=function(e,i,n){return y.push({position:parseInt(e,10),method:i,scope:n!==t?n:_,fired:!1}),_},this.clearOnPosition=function(e,t){var i;if(e=parseInt(e,10),isNaN(e))return!1;for(i=0;i<y.length;i++)e!==y[i].position||t&&t!==y[i].method||(y[i].fired&&b--,y.splice(i,1))},this._processOnPosition=function(){var e,t;if(e=y.length,!e||!_.playState||b>=e)return!1;for(e-=1;e>=0;e--)t=y[e],!t.fired&&_.position>=t.position&&(t.fired=!0,b++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,i;if(t=y.length,!t)return!1;for(t-=1;t>=0;t--)i=y[t],i.fired&&e<=i.position&&(i.fired=!1,b--);return!0},f=function(){var e,t,i=_._iO,n=i.from,s=i.to;return t=function(){ft._wD(_.id+': "To" time of '+s+" reached."),_.clearOnPosition(s,t),_.stop()},e=function(){ft._wD(_.id+': Playing "from" '+n),null===s||isNaN(s)||_.onPosition(s,t)},null!==n&&!isNaN(n)&&(i.position=n,i.multiShot=!1,e()),i},c=function(){var e,t=_._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&_.onPosition(parseInt(e,10),t[e])},d=function(){var e,t=_._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&_.clearOnPosition(parseInt(e,10))},l=function(){_.isHTML5&&V(_)},a=function(){_.isHTML5&&X(_)},s=function(e){e||(y=[],b=0),v=!1,_._hasTimer=null,_._a=null,_._html5_canplay=!1,_.bytesLoaded=null,_.bytesTotal=null,_.duration=_._iO&&_._iO.duration?_._iO.duration:null,_.durationEstimate=null,_.buffered=[],_.eqData=[],_.eqData.left=[],_.eqData.right=[],_.failures=0,_.isBuffering=!1,_.instanceOptions={},_.instanceCount=0,_.loaded=!1,_.metadata={},_.readyState=0,_.muted=!1,_.paused=!1,_.peakData={left:0,right:0},_.waveformData={left:[],right:[]},_.playState=0,_.position=null,_.id3={}},s(),this._onTimer=function(e){var t,s=!1,r={};return _._hasTimer||e?(_._a&&(e||(0<_.playState||1===_.readyState)&&!_.paused)&&(t=_._get_html5_duration(),t!==i&&(i=t,_.duration=t,s=!0),_.durationEstimate=_.duration,t=1e3*_._a.currentTime||0,t!==n&&(n=t,s=!0),(s||e)&&_._whileplaying(t,r,r,r,r)),s):void 0},this._get_html5_duration=function(){var e=_._iO;return(e=_._a&&_._a.duration?1e3*_._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,t){!e.loop&&t>1&&ft._wD("Note: Native HTML5 looping is infinite.",1),e.loop=t>1?"loop":""},this._setup_html5=function(e){e=m(_._iO,e);var t,i=zt?mt:_._a,n=decodeURI(e.url);if(zt?n===decodeURI(ot)&&(t=!0):n===decodeURI(k)&&(t=!0),i){if(i._s)if(zt)i._s&&i._s.playState&&!t&&i._s.stop();else if(!zt&&n===decodeURI(k))return _._apply_loop(i,e.loops),i;t||(s(!1),i.src=e.url,ot=k=_.url=e.url,i._called_load=!1)}else _._a=e.autoLoad||e.autoPlay?new Audio(e.url):Ut&&10>opera.version()?new Audio(null):new Audio,i=_._a,i._called_load=!1,zt&&(mt=i);return _.isHTML5=!0,_._a=i,i._s=_,r(),_._apply_loop(i,e.loops),e.autoLoad||e.autoPlay?_.load():(i.autobuffer=!1,i.preload="auto"),i},r=function(){if(_._a._added_events)return!1;var e;_._a._added_events=!0;for(e in dt)dt.hasOwnProperty(e)&&_._a&&_._a.addEventListener(e,dt[e],!1);return!0},o=function(){var e;ft._wD(_.id+": Removing event listeners"),_._a._added_events=!1;for(e in dt)dt.hasOwnProperty(e)&&_._a&&_._a.removeEventListener(e,dt[e],!1)},this._onload=function(e){var t=!!e||!_.isHTML5&&8===u&&_.duration;return e=_.id+": ",ft._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(_.duration?" -":" Zero-length duration reported.")+" ("+_.url+")"),t?1:2),!t&&!_.isHTML5&&(!0===ft.sandbox.noRemote&&ft._wD(e+z("noNet"),1),!0===ft.sandbox.noLocal&&ft._wD(e+z("noLocal"),1)),_.loaded=t,_.readyState=t?3:2,_._onbufferchange(0),_._iO.onload&&pt(_,function(){_._iO.onload.apply(_,[t])}),!0},this._onbufferchange=function(e){return 0===_.playState||e&&_.isBuffering||!e&&!_.isBuffering?!1:(_.isBuffering=1===e,_._iO.onbufferchange&&(ft._wD(_.id+": Buffer state change: "+e),_._iO.onbufferchange.apply(_)),!0)},this._onsuspend=function(){return _._iO.onsuspend&&(ft._wD(_.id+": Playback suspended"),_._iO.onsuspend.apply(_)),!0},this._onfailure=function(e,t,i){_.failures++,ft._wD(_.id+": Failures = "+_.failures),_._iO.onfailure&&1===_.failures?_._iO.onfailure(_,e,t,i):ft._wD(_.id+": Ignoring failure")},this._onfinish=function(){var e=_._iO.onfinish;_._onbufferchange(0),_._resetOnPosition(0),_.instanceCount&&(_.instanceCount--,_.instanceCount||(d(),_.playState=0,_.paused=!1,_.instanceCount=0,_.instanceOptions={},_._iO={},a(),_.isHTML5&&(_.position=0)),(!_.instanceCount||_._iO.multiShotEvents)&&e)&&(ft._wD(_.id+": onfinish()"),pt(_,function(){e.apply(_)}))},this._whileloading=function(e,t,i,n){var s=_._iO;_.bytesLoaded=e,_.bytesTotal=t,_.duration=Math.floor(i),_.bufferLength=n,_.durationEstimate=_.isHTML5||s.isMovieStar?_.duration:s.duration?_.duration>s.duration?_.duration:s.duration:parseInt(_.bytesTotal/_.bytesLoaded*_.duration,10),_.isHTML5||(_.buffered=[{start:0,end:_.duration}]),(3!==_.readyState||_.isHTML5)&&s.whileloading&&s.whileloading.apply(_)},this._whileplaying=function(e,i,n,s,r){var o=_._iO;return isNaN(e)||null===e?!1:(_.position=Math.max(0,e),_._processOnPosition(),!_.isHTML5&&u>8&&(o.usePeakData&&i!==t&&i&&(_.peakData={left:i.leftPeak,right:i.rightPeak}),o.useWaveformData&&n!==t&&n&&(_.waveformData={left:n.split(","),right:s.split(",")}),o.useEQData&&r!==t&&r&&r.leftEQ&&(e=r.leftEQ.split(","),_.eqData=e,_.eqData.left=e,r.rightEQ!==t&&r.rightEQ&&(_.eqData.right=r.rightEQ.split(",")))),1===_.playState&&(!_.isHTML5&&8===u&&!_.position&&_.isBuffering&&_._onbufferchange(0),o.whileplaying&&o.whileplaying.apply(_)),!0)},this._oncaptiondata=function(e){ft._wD(_.id+": Caption data received."),_.captiondata=e,_._iO.oncaptiondata&&_._iO.oncaptiondata.apply(_,[e])},this._onmetadata=function(e,t){ft._wD(_.id+": Metadata received.");var i,n,s={};for(i=0,n=e.length;n>i;i++)s[e[i]]=t[i];_.metadata=s,_._iO.onmetadata&&_._iO.onmetadata.apply(_)},this._onid3=function(e,t){ft._wD(_.id+": ID3 data received.");var i,n,s=[];for(i=0,n=e.length;n>i;i++)s[e[i]]=t[i];_.id3=m(_.id3,s),_._iO.onid3&&_._iO.onid3.apply(_)},this._onconnect=function(e){e=1===e,ft._wD(_.id+": "+(e?"Connected.":"Failed to connect? - "+_.url),e?1:2),(_.connected=e)&&(_.failures=0,U(_.id)&&(_.getAutoPlay()?_.play(t,_.getAutoPlay()):_._iO.autoLoad&&_.load()),_._iO.onconnect&&_._iO.onconnect.apply(_,[e]))},this._ondataerror=function(e){0<_.playState&&(ft._wD(_.id+": Data error: "+e),_._iO.ondataerror&&_._iO.ondataerror.apply(_))},this._debug()},D=function(){return bt.body||bt._docElement||bt.getElementsByTagName("div")[0]},a=function(e){return bt.getElementById(e)},m=function(e,i){var n,s,r=e||{};n=i===t?ft.defaultOptions:i;for(s in n)n.hasOwnProperty(s)&&r[s]===t&&(r[s]="object"!=typeof n[s]||null===n[s]?n[s]:m(r[s],n[s]));return r},pt=function(t,i){t.isHTML5||8!==u?i():e.setTimeout(i,0)},_={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},g=function(e,i){var n,s=!0,r=i!==t,o=ft.setupOptions;if(e===t){s=[];for(n in o)o.hasOwnProperty(n)&&s.push(n);for(n in _)_.hasOwnProperty(n)&&("object"==typeof ft[n]?s.push(n+": {...}"):ft[n]instanceof Function?s.push(n+": function() {...}"):s.push(n));return ft._wD(z("setup",s.join(", "))),!1}for(n in e)if(e.hasOwnProperty(n))if("object"!=typeof e[n]||null===e[n]||e[n]instanceof Array||e[n]instanceof RegExp)r&&_[i]!==t?ft[i][n]=e[n]:o[n]!==t?(ft.setupOptions[n]=e[n],ft[n]=e[n]):_[n]===t?(W(z(ft[n]===t?"setupUndef":"setupError",n),2),s=!1):ft[n]instanceof Function?ft[n].apply(ft,e[n]instanceof Array?e[n]:[e[n]]):ft[n]=e[n];else{if(_[n]!==t)return g(e[n],n);W(z(ft[n]===t?"setupUndef":"setupError",n),2),s=!1}return s},rt=function(){function t(e){e=Ft.call(e);var t=e.length;return n?(e[1]="on"+e[1],t>3&&e.pop()):3===t&&e.push(!1),e}function i(e,t){var i=e.shift(),r=[s[t]];n?i[r](e[0],e[1]):i[r].apply(i,e)}var n=e.attachEvent,s={add:n?"attachEvent":"addEventListener",remove:n?"detachEvent":"removeEventListener"};return{add:function(){i(t(arguments),"add")},remove:function(){i(t(arguments),"remove")}}}(),dt={abort:r(function(){ft._wD(this._s.id+": abort")}),canplay:r(function(){var e,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,ft._wD(i.id+": canplay"),i._onbufferchange(0),e=i._iO.position===t||isNaN(i._iO.position)?null:i._iO.position/1e3,i.position&&this.currentTime!==e){ft._wD(i.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(n){ft._wD(i.id+": canplay: Setting position of "+e+" failed: "+n.message,2)}}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:r(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:r(function(){var e=this._s;ft._wD(e.id+": ended"),e._onfinish()}),error:r(function(){ft._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:r(function(){var e=this._s;ft._wD(e.id+": loadeddata"),!e._loaded&&!Wt&&(e.duration=e._get_html5_duration())}),loadedmetadata:r(function(){ft._wD(this._s.id+": loadedmetadata")}),loadstart:r(function(){ft._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:r(function(){this._s._onbufferchange(0)}),playing:r(function(){ft._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:r(function(e){var t,i,n,s=this._s;t=0;var r="progress"===e.type,o=e.target.buffered,a=e.loaded||0,l=e.total||1;if(s.buffered=[],o&&o.length){for(t=0,i=o.length;i>t;t++)s.buffered.push({start:1e3*o.start(t),end:1e3*o.end(t)});if(t=1e3*(o.end(0)-o.start(0)),a=Math.min(1,t/(1e3*e.target.duration)),r&&1<o.length){for(n=[],i=o.length,t=0;i>t;t++)n.push(1e3*e.target.buffered.start(t)+"-"+1e3*e.target.buffered.end(t));ft._wD(this._s.id+": progress, timeRanges: "+n.join(", "))}r&&!isNaN(a)&&ft._wD(this._s.id+": progress, "+Math.floor(100*a)+"% loaded")}isNaN(a)||(s._onbufferchange(0),s._whileloading(a,l,s._get_html5_duration()),a&&l&&a===l&&dt.canplaythrough.call(this,e))}),ratechange:r(function(){ft._wD(this._s.id+": ratechange")}),suspend:r(function(e){var t=this._s;ft._wD(this._s.id+": suspend"),dt.progress.call(this,e),t._onsuspend()}),stalled:r(function(){ft._wD(this._s.id+": stalled")}),timeupdate:r(function(){this._s._onTimer()}),waiting:r(function(){var e=this._s;ft._wD(this._s.id+": waiting"),e._onbufferchange(1)})},Z=function(e){return e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&s(e.type)?!1:e.type?et({type:e.type}):et({url:e.url})||ft.html5Only||e.url.match(/data\:/i):!1},it=function(e){var t;return e&&(t=Wt&&!$t?null:Vt?"about:blank":null,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),zt&&(ot=null),t},et=function(e){if(!ft.useHTML5Audio||!ft.hasHTML5)return!1;var i=e.url||null;e=e.type||null;var n,r=ft.audioFormats;if(e&&ft.html5[e]!==t)return ft.html5[e]&&!s(e);if(!tt){tt=[];for(n in r)r.hasOwnProperty(n)&&(tt.push(n),r[n].related&&(tt=tt.concat(r[n].related)));tt=RegExp("\\.("+tt.join("|")+")(\\?.*)?$","i")}return n=i?i.toLowerCase().match(tt):null,n&&n.length?n=n[1]:e&&(i=e.indexOf(";"),n=(-1!==i?e.substr(0,i):e).substr(6)),n&&ft.html5[n]!==t?i=ft.html5[n]&&!s(n):(e="audio/"+n,i=ft.html5.canPlayType({type:e}),i=(ft.html5[n]=i)&&ft.html5[e]&&!s(e)),i},st=function(){function e(e){var t,i,n=t=!1;
if(!r||"function"!=typeof r.canPlayType)return t;if(e instanceof Array){for(t=0,i=e.length;i>t;t++)(ft.html5[e[t]]||r.canPlayType(e[t]).match(ft.html5Test))&&(n=!0,ft.html5[e[t]]=!0,ft.flash[e[t]]=!!e[t].match(ei));t=n}else e=r&&"function"==typeof r.canPlayType?r.canPlayType(e):!1,t=!(!e||!e.match(ft.html5Test));return t}if(!ft.useHTML5Audio||!ft.hasHTML5)return Pt=ft.html5.usingFlash=!0,!1;var i,n,s,r=Audio!==t?Ut&&10>opera.version()?new Audio(null):new Audio:null,o={};s=ft.audioFormats;for(i in s)if(s.hasOwnProperty(i)&&(n="audio/"+i,o[i]=e(s[i].type),o[n]=o[i],i.match(ei)?(ft.flash[i]=!0,ft.flash[n]=!0):(ft.flash[i]=!1,ft.flash[n]=!1),s[i]&&s[i].related))for(n=s[i].related.length-1;n>=0;n--)o["audio/"+s[i].related[n]]=o[i],ft.html5[s[i].related[n]]=o[i],ft.flash[s[i].related[n]]=o[i];return o.canPlayType=r?e:null,ft.html5=m(ft.html5,o),ft.html5.usingFlash=J(),Pt=ft.html5.usingFlash,!0},x={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+bt.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},z=function(){var e,t,i=Ft.call(arguments),n=i.shift(),n=x&&x[n]?x[n]:"";if(n&&i&&i.length)for(e=0,t=i.length;t>e;e++)n=n.replace("%s",i[e]);return n},q=function(e){return 8===u&&1<e.loops&&e.stream&&(p("as2loop"),e.stream=!1),e},Q=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(ft._wD((t||"")+z("policy")),e.usePolicyFile=!0),e},W=function(e){Yt&&console.warn!==t?console.warn(e):ft._wD(e)},l=function(){return!1},j=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=l)},P=function(e){e===t&&(e=!1),(Tt||e)&&ft.disable(e)},F=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+ft.movieURL,ft.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},C=function(){u=parseInt(ft.flashVersion,10),8!==u&&9!==u&&(ft._wD(z("badFV",u,8)),ft.flashVersion=u=8);var e=ft.debugMode||ft.debugFlash?"_debug.swf":".swf";ft.useHTML5Audio&&!ft.html5Only&&ft.audioFormats.mp4.required&&9>u&&(ft._wD(z("needfl9")),ft.flashVersion=u=9),ft.version=ft.versionNumber+(ft.html5Only?" (HTML5-only mode)":9===u?" (AS3/Flash 9)":" (AS2/Flash 8)"),u>8?(ft.defaultOptions=m(ft.defaultOptions,ft.flash9Options),ft.features.buffering=!0,ft.defaultOptions=m(ft.defaultOptions,ft.movieStarOptions),ft.filePatterns.flash9=RegExp("\\.(mp3|"+si.join("|")+")(\\?.*)?$","i"),ft.features.movieStar=!0):ft.features.movieStar=!1,ft.filePattern=ft.filePatterns[8!==u?"flash9":"flash8"],ft.movieURL=(8===u?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),ft.features.peakData=ft.features.waveformData=ft.features.eqData=u>8},I=function(e,t){return gt?(gt._setPolling(e,t),void 0):!1},L=function(){if(ft.debugURLParam.test(yt)&&(ft.debugMode=!0),a(ft.debugID))return!1;var e,t,i,n;if(!(!ft.debugMode||a(ft.debugID)||Yt&&ft.useConsole&&ft.consoleOnly)){e=bt.createElement("div"),e.id=ft.debugID+"-toggle",t={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(bt.createTextNode("-")),e.onclick=B,e.title="Toggle SM2 debug console",vt.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);if(t=bt.createElement("div"),t.id=ft.debugID,t.style.display=ft.debugMode?"block":"none",ft.debugMode&&!a(e.id)){try{i=D(),i.appendChild(e)}catch(s){throw Error(z("domError")+" \n"+s.toString())}i.appendChild(t)}}},U=this.getSoundById,p=function(e,t){return e?ft._wD(z(e),t):""},B=function(){var e=a(ft.debugID),t=a(ft.debugID+"-toggle");return e?(wt?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),wt=!wt,void 0):!1},h=function(i,n,s){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(i,n,s)}catch(r){return!1}return!0},$=function(){var e=[];return ft.debugMode&&e.push("sm2_debug"),ft.debugFlash&&e.push("flash_debug"),ft.useHighPerformance&&e.push("high_performance"),e.join(" ")},H=function(){var e=z("fbHandler"),t=ft.getMoviePercent(),i={type:"FLASHBLOCK"};return ft.html5Only?!1:(ft.ok()?(ft.didFlashBlock&&ft._wD(e+": Unblocked"),ft.oMC&&(ft.oMC.className=[$(),"movieContainer","swf_loaded"+(ft.didFlashBlock?" swf_unblocked":"")].join(" "))):(Pt&&(ft.oMC.className=$()+" movieContainer "+(null===t?"swf_timedout":"swf_error"),ft._wD(e+": "+z("fbTimeout")+(t?" ("+z("fbLoaded")+")":""))),ft.didFlashBlock=!0,y({type:"ontimeout",ignoreInit:!0,error:i}),R(i)),void 0)},v=function(e,i,n){kt[e]===t&&(kt[e]=[]),kt[e].push({method:i,scope:n||null,fired:!1})},y=function(e){if(e||(e={type:ft.ok()?"onready":"ontimeout"}),!xt&&e&&!e.ignoreInit||"ontimeout"===e.type&&(ft.ok()||Tt&&!e.ignoreInit))return!1;var t,i={success:e&&e.ignoreInit?ft.ok():!Tt},n=e&&e.type?kt[e.type]||[]:[],s=[],i=[i],r=Pt&&!ft.ok();for(e.error&&(i[0].error=e.error),e=0,t=n.length;t>e;e++)!0!==n[e].fired&&s.push(n[e]);if(s.length)for(e=0,t=s.length;t>e;e++)s[e].scope?s[e].method.apply(s[e].scope,i):s[e].method.apply(this,i),r||(s[e].fired=!0);return!0},b=function(){e.setTimeout(function(){ft.useFlashBlock&&H(),y(),"function"==typeof ft.onload&&(p("onload",1),ft.onload.apply(e),p("onloadOK",1)),ft.waitForWindowLoad&&rt.add(e,"load",b)},1)},lt=function(){if(at!==t)return at;var i,n=!1,s=navigator,r=s.plugins,o=e.ActiveXObject;if(r&&r.length)(s=s.mimeTypes)&&s["application/x-shockwave-flash"]&&s["application/x-shockwave-flash"].enabledPlugin&&s["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(o!==t&&!vt.match(/MSAppHost/i)){try{i=new o("ShockwaveFlash.ShockwaveFlash")}catch(a){i=null}n=!!i}return at=n},J=function(){var e,t,i=ft.audioFormats;if($t&&vt.match(/os (1|2|3_0|3_1)/i)?(ft.hasHTML5=!1,ft.html5Only=!0,ft.oMC&&(ft.oMC.style.display="none")):ft.useHTML5Audio&&(ft.html5&&ft.html5.canPlayType||(ft._wD("SoundManager: No HTML5 Audio() support detected."),ft.hasHTML5=!1),Gt&&ft._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(at?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),ft.useHTML5Audio&&ft.hasHTML5)for(t in K=!0,i)i.hasOwnProperty(t)&&i[t].required&&(ft.html5.canPlayType(i[t].type)?ft.preferFlash&&(ft.flash[t]||ft.flash[i[t].type])&&(e=!0):(K=!1,e=!0));return ft.ignoreFlash&&(e=!1,K=!0),ft.html5Only=ft.hasHTML5&&ft.useHTML5Audio&&!e,!ft.html5Only},Y=function(e){var t,i,n=0;if(e instanceof Array){for(t=0,i=e.length;i>t;t++)if(e[t]instanceof Object){if(ft.canPlayMIME(e[t].type)){n=t;break}}else if(ft.canPlayURL(e[t])){n=t;break}e[n].url&&(e[n]=e[n].url),e=e[n]}return e},V=function(e){e._hasTimer||(e._hasTimer=!0,!Xt&&ft.html5PollingInterval&&(null===Lt&&0===It&&(Lt=setInterval(G,ft.html5PollingInterval)),It++))},X=function(e){e._hasTimer&&(e._hasTimer=!1,!Xt&&ft.html5PollingInterval&&It--)},G=function(){var e;if(null!==Lt&&!It)return clearInterval(Lt),Lt=null,!1;for(e=ft.soundIDs.length-1;e>=0;e--)ft.sounds[ft.soundIDs[e]].isHTML5&&ft.sounds[ft.soundIDs[e]]._hasTimer&&ft.sounds[ft.soundIDs[e]]._onTimer()},R=function(i){i=i!==t?i:{},"function"==typeof ft.onerror&&ft.onerror.apply(e,[{type:i.type!==t?i.type:null}]),i.fatal!==t&&i.fatal&&ft.disable()},ct=function(){if(!Gt||!lt())return!1;var e,t,i=ft.audioFormats;for(t in i)if(i.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(ft._wD("soundManager: Using flash fallback for "+t+" format"),ft.html5[t]=!1,i[t]&&i[t].related))for(e=i[t].related.length-1;e>=0;e--)ft.html5[i[t].related[e]]=!1},this._setSandboxType=function(e){var i=ft.sandbox;i.type=e,i.description=i.types[i.types[e]!==t?e:"unknown"],"localWithFile"===i.type?(i.noRemote=!0,i.noLocal=!1,p("secNote",2)):"localWithNetwork"===i.type?(i.noRemote=!1,i.noLocal=!0):"localTrusted"===i.type&&(i.noRemote=!1,i.noLocal=!1)},this._externalInterfaceOK=function(e){if(ft.swfLoaded)return!1;var t;return h("swf",!0),h("flashtojs",!0),ft.swfLoaded=!0,Jt=!1,Gt&&ct(),e&&e.replace(/\+dev/i,"")===ft.versionNumber.replace(/\+dev/i,"")?(setTimeout(d,qt?100:1),void 0):(t='soundManager: Fatal: JavaScript file build "'+ft.versionNumber+'" does not match Flash SWF build "'+e+'" at '+ft.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(t)},0),!1)},O=function(e,i){function n(){var e,t=[],i=[];e="SoundManager "+ft.version+(!ft.html5Only&&ft.useHTML5Audio?ft.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),ft.html5Only?ft.html5PollingInterval&&t.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"):(ft.preferFlash&&t.push("preferFlash"),ft.useHighPerformance&&t.push("useHighPerformance"),ft.flashPollingInterval&&t.push("flashPollingInterval ("+ft.flashPollingInterval+"ms)"),ft.html5PollingInterval&&t.push("html5PollingInterval ("+ft.html5PollingInterval+"ms)"),ft.wmode&&t.push("wmode ("+ft.wmode+")"),ft.debugFlash&&t.push("debugFlash"),ft.useFlashBlock&&t.push("flashBlock")),t.length&&(i=i.concat([t.join(" + ")])),ft._wD(e+(i.length?" + "+i.join(", "):""),1),ut()}function s(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(Ct&&At)return!1;if(ft.html5Only)return C(),n(),ft.oMC=a(ft.movieID),d(),At=Ct=!0,!1;var r,o,l,c=i||ft.url,u=ft.altURL||c,h=D(),p=$(),f=null,f=bt.getElementsByTagName("html")[0],f=f&&f.dir&&f.dir.match(/rtl/i);if(e=e===t?ft.id:e,C(),ft.url=F(ti?c:u),i=ft.url,ft.wmode=!ft.wmode&&ft.useHighPerformance?"transparent":ft.wmode,null!==ft.wmode&&(vt.match(/msie 8/i)||!qt&&!ft.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(jt.push(x.spcWmode),ft.wmode=null),h={name:e,id:e,src:i,quality:"high",allowScriptAccess:ft.allowScriptAccess,bgcolor:ft.bgColor,pluginspage:ii+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:ft.wmode,hasPriority:"true"},ft.debugFlash&&(h.FlashVars="debug=1"),ft.wmode||delete h.wmode,qt)c=bt.createElement("div"),o=['<object id="'+e+'" data="'+i+'" type="'+h.type+'" title="'+h.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+ii+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',s("movie",i),s("AllowScriptAccess",ft.allowScriptAccess),s("quality",h.quality),ft.wmode?s("wmode",ft.wmode):"",s("bgcolor",ft.bgColor),s("hasPriority","true"),ft.debugFlash?s("FlashVars",h.FlashVars):"","</object>"].join("");else for(r in c=bt.createElement("embed"),h)h.hasOwnProperty(r)&&c.setAttribute(r,h[r]);if(L(),p=$(),h=D())if(ft.oMC=a(ft.movieID)||bt.createElement("div"),ft.oMC.id)l=ft.oMC.className,ft.oMC.className=(l?l+" ":"movieContainer")+(p?" "+p:""),ft.oMC.appendChild(c),qt&&(r=ft.oMC.appendChild(bt.createElement("div")),r.className="sm2-object-box",r.innerHTML=o),At=!0;else{if(ft.oMC.id=ft.movieID,ft.oMC.className="movieContainer "+p,r=p=null,ft.useFlashBlock||(ft.useHighPerformance?p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(p.left=Math.abs(parseInt(p.left,10))+"px"))),Qt&&(ft.oMC.style.zIndex=1e4),!ft.debugFlash)for(l in p)p.hasOwnProperty(l)&&(ft.oMC.style[l]=p[l]);try{qt||ft.oMC.appendChild(c),h.appendChild(ft.oMC),qt&&(r=ft.oMC.appendChild(bt.createElement("div")),r.className="sm2-object-box",r.innerHTML=o),At=!0}catch(m){throw Error(z("domError")+" \n"+m.toString())}}return Ct=!0,n(),!0},T=function(){return ft.html5Only?(O(),!1):gt?!1:ft.url?(gt=ft.getMovie(ft.id),gt||(Et?(qt?ft.oMC.innerHTML=Dt:ft.oMC.appendChild(Et),Et=null,Ct=!0):O(ft.id,ft.url),gt=ft.getMovie(ft.id)),"function"==typeof ft.oninitmovie&&setTimeout(ft.oninitmovie,1),ht(),!0):(p("noURL"),!1)},k=function(){setTimeout(w,1e3)},w=function(){var t,i=!1;return!ft.url||Ot?!1:(Ot=!0,rt.remove(e,"load",k),Jt&&!Kt?(p("waitFocus"),!1):(xt||(t=ft.getMoviePercent(),t>0&&100>t&&(i=!0)),setTimeout(function(){return t=ft.getMoviePercent(),i?(Ot=!1,ft._wD(z("waitSWF")),e.setTimeout(k,1),!1):(xt||(ft._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(ft.debugFlash?" "+z("checkSWF"):""),2),!ti&&t&&(p("localFail",2),ft.debugFlash||p("tryDebug",2)),0===t&&ft._wD(z("swf404",ft.url),1),h("flashtojs",!1," (Check flash security or flash blockers)")),!xt&&Zt&&(null===t?ft.useFlashBlock||0===ft.flashLoadTimeout?(ft.useFlashBlock&&H(),p("waitForever")):!ft.useFlashBlock&&K?e.setTimeout(function(){W("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),ft.setup({preferFlash:!1}).reboot(),ft.didFlashBlock=!0,ft.beginDelayedInit()},1):(p("waitForever"),y({type:"ontimeout",ignoreInit:!0})):0===ft.flashLoadTimeout?p("waitForever"):P(!0)),void 0)},ft.flashLoadTimeout),void 0))},A=function(){return Kt||!Jt?(rt.remove(e,"focus",A),!0):(Kt=Zt=!0,p("gotFocus"),Ot=!1,k(),rt.remove(e,"focus",A),!0)},ht=function(){jt.length&&(ft._wD("SoundManager 2: "+jt.join(" "),1),jt=[])},ut=function(){ht();var e,t=[];if(ft.useHTML5Audio&&ft.hasHTML5){for(e in ft.audioFormats)ft.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+ft.html5[e]+(!ft.html5[e]&&Pt&&ft.flash[e]?" (using flash)":ft.preferFlash&&ft.flash[e]&&Pt?" (preferring flash)":ft.html5[e]?"":" ("+(ft.audioFormats[e].required?"required, ":"")+"and no flash support)"));ft._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},f=function(t){if(xt)return!1;if(ft.html5Only)return p("sm2Loaded"),xt=!0,b(),h("onload",!0),!0;var i,n=!0;return ft.useFlashBlock&&ft.flashLoadTimeout&&!ft.getMoviePercent()||(xt=!0,Tt&&(i={type:!at&&Pt?"NO_FLASH":"INIT_TIMEOUT"})),ft._wD("SoundManager 2 "+(Tt?"failed to load":"loaded")+" ("+(Tt?"Flash security/load error":"OK")+")",Tt?2:1),Tt||t?(ft.useFlashBlock&&ft.oMC&&(ft.oMC.className=$()+" "+(null===ft.getMoviePercent()?"swf_timedout":"swf_error")),y({type:"ontimeout",error:i,ignoreInit:!0}),h("onload",!1),R(i),n=!1):h("onload",!0),Tt||(ft.waitForWindowLoad&&!St?(p("waitOnload"),rt.add(e,"load",b)):(ft.waitForWindowLoad&&St&&p("docLoaded"),b())),n},c=function(){var e,i=ft.setupOptions;for(e in i)i.hasOwnProperty(e)&&(ft[e]===t?ft[e]=i[e]:ft[e]!==i[e]&&(ft.setupOptions[e]=ft[e]))},d=function(){if(xt)return p("didInit"),!1;if(ft.html5Only)return xt||(rt.remove(e,"load",ft.beginDelayedInit),ft.enabled=!0,f()),!0;T();try{gt._externalInterfaceTest(!1),I(!0,ft.flashPollingInterval||(ft.useHighPerformance?10:50)),ft.debugMode||gt._disableDebug(),ft.enabled=!0,h("jstoflash",!0),ft.html5Only||rt.add(e,"unload",l)}catch(t){return ft._wD("js/flash exception: "+t.toString()),h("jstoflash",!1),R({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),P(!0),f(),!1}return f(),rt.remove(e,"load",ft.beginDelayedInit),!0},M=function(){if(E)return!1;E=!0,c(),L();var e=null,e=null,t=yt.toLowerCase();return-1!==t.indexOf("sm2-usehtml5audio=")&&(e="1"===t.charAt(t.indexOf("sm2-usehtml5audio=")+18),Yt&&console.log((e?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),ft.setup({useHTML5Audio:e})),-1!==t.indexOf("sm2-preferflash=")&&(e="1"===t.charAt(t.indexOf("sm2-preferflash=")+16),Yt&&console.log((e?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),ft.setup({preferFlash:e})),!at&&ft.hasHTML5&&(ft._wD("SoundManager: No Flash detected"+(ft.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),ft.setup({useHTML5Audio:!0,preferFlash:!1})),st(),!at&&Pt&&(jt.push(x.needFlash),ft.setup({flashLoadTimeout:1})),bt.removeEventListener&&bt.removeEventListener("DOMContentLoaded",M,!1),T(),!0},nt=function(){return"complete"===bt.readyState&&(M(),bt.detachEvent("onreadystatechange",nt)),!0},N=function(){St=!0,rt.remove(e,"load",N)},S=function(){Xt&&((!ft.setupOptions.useHTML5Audio||ft.setupOptions.preferFlash)&&jt.push(x.mobileUA),ft.setupOptions.useHTML5Audio=!0,ft.setupOptions.preferFlash=!1,$t||Bt&&!vt.match(/android\s2\.3/i))&&(jt.push(x.globalHTML5),$t&&(ft.ignoreFlash=!0),zt=!0)},S(),lt(),rt.add(e,"focus",A),rt.add(e,"load",k),rt.add(e,"load",N),bt.addEventListener?bt.addEventListener("DOMContentLoaded",M,!1):bt.attachEvent?bt.attachEvent("onreadystatechange",nt):(h("onload",!1),R({type:"NO_DOM2_EVENTS",fatal:!0}))}var n=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(n=new i),e.SoundManager=i,e.soundManager=n}(window),soundManager.setup({url:"/swf",preferFlash:!1}),Animator.prototype={setOptions:function(e){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},e)},seekTo:function(e){this.seekFromTo(this.state,e)},seekFromTo:function(e,t){this.target=Math.max(0,Math.min(1,t)),this.state=Math.max(0,Math.min(1,e)),this.lastTime=(new Date).getTime(),this.intervalId||(this.intervalId=window.setInterval(this.timerDelegate,this.options.interval))},jumpTo:function(e){this.target=this.state=Math.max(0,Math.min(1,e)),this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(e,t){return this.subjects[this.subjects.length]=e,this.subjectScopes[this.subjectScopes.length]=t,this},clearSubjects:function(){this.subjects=[],this.subjectScopes=[]},propagate:function(){for(var e=this.options.transition(this.state),t=0;t<this.subjects.length;t++)this.subjects[t].setState?this.subjects[t].setState(e):this.subjects[t].apply(this.subjectScopes[t],[e])},onTimerEvent:function(){var e=(new Date).getTime(),t=e-this.lastTime;this.lastTime=e;var i=t/this.options.duration*(this.state<this.target?1:-1);Math.abs(i)>=Math.abs(this.state-this.target)?this.state=this.target:this.state+=i;try{this.propagate()}finally{this.options.onStep.call(this),this.target==this.state&&(window.clearInterval(this.intervalId),this.intervalId=null,this.options.onComplete.call(this))}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){for(var e="#<Animator:\n",t=0;t<this.subjects.length;t++)e+=this.subjects[t].inspect();return e+=">"}},Animator.applyDefaults=function(e,t){t=t||{};var i,n={};for(i in e)n[i]=void 0!==t[i]?t[i]:e[i];return n},Animator.makeArray=function(e){if(null==e)return[];if(!e.length)return[e];for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return t},Animator.camelize=function(e){var t=e.split("-");if(1==t.length)return t[0];for(var i=0==e.indexOf("-")?t[0].charAt(0).toUpperCase()+t[0].substring(1):t[0],n=1,s=t.length;s>n;n++){var r=t[n];i+=r.charAt(0).toUpperCase()+r.substring(1)}return i},Animator.apply=function(e,t,i){return t instanceof Array?new Animator(i).addSubject(new CSSStyleSubject(e,t[0],t[1])):new Animator(i).addSubject(new CSSStyleSubject(e,t))},Animator.makeEaseIn=function(e){return function(t){return Math.pow(t,2*e)}},Animator.makeEaseOut=function(e){return function(t){return 1-Math.pow(1-t,2*e)}},Animator.makeElastic=function(e){return function(t){return t=Animator.tx.easeInOut(t),(1-Math.cos(t*Math.PI*e))*(1-t)+t}},Animator.makeADSR=function(e,t,i,n){return null==n&&(n=.5),function(s){return e>s?s/e:t>s?1-(s-e)/(t-e)*(1-n):i>s?n:n*(1-(s-i)/(1-i))}},Animator.makeBounce=function(e){var t=Animator.makeElastic(e);return function(e){return e=t(e),1>=e?e:2-e}},Animator.tx={easeInOut:function(e){return-Math.cos(e*Math.PI)/2+.5},linear:function(e){return e},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)},NumericalStyleSubject.prototype={setState:function(e){var t=this.getStyle(e);"opacity"==this.property&&0==e?"hidden":"";for(var i=0,n=0;n<this.els.length;n++){try{this.els[n].style[this.property]=t}catch(s){if("fontWeight"!=this.property)throw s}if(i++>20)return}},getStyle:function(e){return e=this.from+(this.to-this.from)*e,"filter"==this.property?"alpha(opacity="+Math.round(100*e)+")":"opacity"==this.property?e:Math.round(e)+this.units},inspect:function(){return"	"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}},ColorStyleSubject.prototype={expandColor:function(e){var t,i,n,s;return(t=ColorStyleSubject.parseColor(e))?(i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),[i,n,s]):(window.DEBUG&&alert("Invalid colour: '"+e+"'"),void 0)},getValueForState:function(e,t){return Math.round(this.from[e]+(this.to[e]-this.from[e])*t)},setState:function(e){for(var t="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,e))+ColorStyleSubject.toColorPart(this.getValueForState(1,e))+ColorStyleSubject.toColorPart(this.getValueForState(2,e)),i=0;i<this.els.length;i++)this.els[i].style[this.property]=t},inspect:function(){return"	"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}},ColorStyleSubject.parseColor=function(e){var t,i="#";if(t=ColorStyleSubject.parseColor.rgbRe.exec(e)){for(var n,s=1;3>=s;s++)n=Math.max(0,Math.min(255,parseInt(t[s]))),i+=ColorStyleSubject.toColorPart(n);return i}if(t=ColorStyleSubject.parseColor.hexRe.exec(e)){if(3==t[1].length){for(var s=0;3>s;s++)i+=t[1].charAt(s)+t[1].charAt(s);return i}return"#"+t[1]}return!1},ColorStyleSubject.toColorPart=function(e){e>255&&(e=255);var t=e.toString(16);return 16>e?"0"+t:t},ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,DiscreteStyleSubject.prototype={setState:function(e){for(var t=0;t<this.els.length;t++)this.els[t].style[this.property]=e<=this.threshold?this.from:this.to},inspect:function(){return"	"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}},CSSStyleSubject.prototype={parseStyle:function(e,t){var i={};if(-1!=e.indexOf(":"))for(var n=e.split(";"),s=0;s<n.length;s++){var r=CSSStyleSubject.ruleRe.exec(n[s]);r&&(i[r[1]]=r[2])}else{var o,a,l;l=t.className,t.className=e;for(var s=0;s<CSSStyleSubject.cssProperties.length;s++)o=CSSStyleSubject.cssProperties[s],a=CSSStyleSubject.getStyle(t,o),null!=a&&(i[o]=a);t.className=l}return i},setState:function(e){for(var t=0;t<this.subjects.length;t++)this.subjects[t].setState(e)},inspect:function(){for(var e="",t=0;t<this.subjects.length;t++)e+=this.subjects[t].inspect();return e}},CSSStyleSubject.getStyle=function(e,t){var i;return document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t))?i:(t=Animator.camelize(t),e.currentStyle&&(i=e.currentStyle[t]),i||e.style[t])},CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/,CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/,CSSStyleSubject.discreteRe=/^\w+$/,CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"],AnimatorChain.prototype={setOptions:function(e){this.options=Animator.applyDefaults({resetOnPlay:!0},e)},play:function(){if(this.forwards=!0,this.current=-1,this.options.resetOnPlay)for(var e=0;e<this.animators.length;e++)this.animators[e].jumpTo(0);this.advance()},reverse:function(){if(this.forwards=!1,this.current=this.animators.length,this.options.resetOnPlay)for(var e=0;e<this.animators.length;e++)this.animators[e].jumpTo(1);this.advance()},toggle:function(){this.forwards?this.seekTo(0):this.seekTo(1)},listenTo:function(e){var t=e.options.onComplete,i=this;e.options.onComplete=function(){t&&t.call(e),i.advance()}},advance:function(){if(this.forwards){if(null==this.animators[this.current+1])return;this.current++,this.animators[this.current].play()}else{if(null==this.animators[this.current-1])return;this.current--,this.animators[this.current].reverse()}},seekTo:function(e){0>=e?(this.forwards=!1,this.animators[this.current].seekTo(0)):(this.forwards=!0,this.animators[this.current].seekTo(1))}},Accordion.prototype={setOptions:function(e){this.options=Object.extend({sections:null,getActivator:function(e){return document.getElementById(e.getAttribute("activator"))},shift:0,initialSection:0,rememberance:!0,animatorOptions:{}},e||{})},show:function(e){for(var t=0;t<this.ans.length;t++)this.ans[t].seekTo(t>e?1:0);this.options.rememberance&&(document.location.hash=this.rememberanceTexts[e])}};var threeSixtyPlayer,ThreeSixtyPlayer;!function(e){function t(){var t=this,i=this,n=soundManager,s=navigator.userAgent,r=s.match(/msie/i),o=s.match(/opera/i),a=s.match(/safari/i),l=s.match(/chrome/i),c=(s.match(/firefox/i),s.match(/ipad|iphone/i)),d="undefined"==typeof e.G_vmlCanvasManager&&"undefined"!=typeof document.createElement("canvas").getContext("2d"),u=o||l?359.9:360;this.excludeClass="threesixty-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.lastTouchedSound=null,this.soundCount=0,this.oUITemplate=null,this.oUIImageMap=null,this.vuMeter=null,this.callbackCount=0,this.peakDataHistory=[],this.config={playNext:!1,autoPlay:!1,allowMultiple:!1,loadRingColor:"#ccc",playRingColor:"#000",backgroundRingColor:"#eee",segmentRingColor:"rgba(255,255,255,0.33)",segmentRingColorAlt:"rgba(0,0,0,0.1)",loadRingColorMetadata:"#ddd",playRingColorMetadata:"rgba(128,192,256,0.9)",circleDiameter:null,circleRadius:null,animDuration:500,animTransition:e.Animator.tx.bouncy,showHMSTime:!1,scaleFont:!0,useWaveformData:!1,waveformDataColor:"#0099ff",waveformDataDownsample:3,waveformDataOutside:!1,waveformDataConstrain:!1,waveformDataLineRatio:.64,useEQData:!1,eqDataColor:"#339933",eqDataDownsample:4,eqDataOutside:!0,eqDataLineRatio:.54,usePeakData:!0,peakDataColor:"#ff33ff",peakDataOutside:!0,peakDataLineRatio:.5,useAmplifier:!0,fontSizeMax:null,scaleArcWidth:1,useFavIcon:!1,playCallback:!1,stopCallback:!1,finishCallback:!1,fallbackFormat:!1,fallbackFromFormat:".mp3",fallbackToFormat:".ogg"},this.css={sDefault:"sm2_link",sBuffering:"sm2_buffering",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler="undefined"!=typeof e.addEventListener?function(e,t,i){return e.addEventListener(t,i,!1)}:function(e,t,i){e.attachEvent("on"+t,i)},this.removeEventHandler="undefined"!=typeof e.removeEventListener?function(e,t,i){return e.removeEventListener(t,i,!1)}:function(e,t,i){return e.detachEvent("on"+t,i)},this.hasClass=function(e,t){return"undefined"!=typeof e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1},this.addClass=function(e,i){return e&&i&&!t.hasClass(e,i)?(e.className=(e.className?e.className+" ":"")+i,void 0):!1},this.removeClass=function(e,i){return e&&i&&t.hasClass(e,i)?(e.className=e.className.replace(new RegExp("( "+i+")|("+i+")","g"),""),void 0):!1},this.getElementsByClassName=function(e,i,n){var s,r,o=n||document,a=[],l=[];if("undefined"!=typeof i&&"string"!=typeof i)for(s=i.length;s--;)l&&l[i[s]]||(l[i[s]]=o.getElementsByTagName(i[s]));else l=i?o.getElementsByTagName(i):o.all||o.getElementsByTagName("*");if("string"!=typeof i)for(s=i.length;s--;)for(r=l[i[s]].length;r--;)t.hasClass(l[i[s]][r],e)&&a.push(l[i[s]][r]);else for(s=0;s<l.length;s++)t.hasClass(l[s],e)&&a.push(l[s]);return a},this.getParentByNodeName=function(e,t){if(!e||!t)return!1;for(t=t.toLowerCase();e.parentNode&&t!==e.parentNode.nodeName.toLowerCase();)e=e.parentNode;return e.parentNode&&t===e.parentNode.nodeName.toLowerCase()?e.parentNode:null},this.getParentByClassName=function(e,i){if(!e||!i)return!1;for(;e.parentNode&&!t.hasClass(e.parentNode,i);)e=e.parentNode;return e.parentNode&&t.hasClass(e.parentNode,i)?e.parentNode:null},this.getSoundByURL=function(e){return"undefined"!=typeof t.soundsByURL[e]?t.soundsByURL[e]:null},this.isChildOfNode=function(e,t){if(!e||!e.parentNode)return!1;t=t.toLowerCase();do e=e.parentNode;while(e&&e.parentNode&&e.nodeName.toLowerCase()!==t);return e&&e.nodeName.toLowerCase()===t?e:null},this.isChildOfClass=function(e,i){if(!e||!i)return!1;for(;e.parentNode&&!t.hasClass(e,i);)e=t.findParent(e);return t.hasClass(e,i)},this.findParent=function(e){if(!e||!e.parentNode)return!1;if(e=e.parentNode,2===e.nodeType)for(;e&&e.parentNode&&2===e.parentNode.nodeType;)e=e.parentNode;return e},this.getStyle=function(t,i){try{if(t.currentStyle)return t.currentStyle[i];if(e.getComputedStyle)return document.defaultView.getComputedStyle(t,null).getPropertyValue(i)
}catch(n){}return null},this.findXY=function(e){var t=0,i=0;do t+=e.offsetLeft,i+=e.offsetTop;while(e=e.offsetParent);return[t,i]},this.getMouseXY=function(i){return i=i?i:e.event,c&&i.touches&&(i=i.touches[0]),i.pageX||i.pageY?[i.pageX,i.pageY]:i.clientX||i.clientY?[i.clientX+t.getScrollLeft(),i.clientY+t.getScrollTop()]:void 0},this.getScrollLeft=function(){return document.body.scrollLeft+document.documentElement.scrollLeft},this.getScrollTop=function(){return document.body.scrollTop+document.documentElement.scrollTop},this.events={play:function(){i.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=i.css.sPlaying,i.addClass(this._360data.oUIBox,this._360data.className),t.fanOut(this),"function"==typeof t.config.playCallback&&t.config.playCallback.call(t,this)},stop:function(){i.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",t.fanIn(this),"function"==typeof t.config.stopCallback&&t.config.stopCallback.call(t,this)},pause:function(){i.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=i.css.sPaused,i.addClass(this._360data.oUIBox,this._360data.className)},resume:function(){i.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className=i.css.sPlaying,i.addClass(this._360data.oUIBox,this._360data.className)},finish:function(){var e;i.removeClass(this._360data.oUIBox,this._360data.className),this._360data.className="",this._360data.didFinish=!0,t.fanIn(this),i.config.playNext&&(e=i.indexByURL[this._360data.oLink.href]+1,e<i.links.length&&i.handleClick({target:i.links[e]})),"function"==typeof t.config.finishCallback&&t.config.finishCallback.call(t,this)},whileloading:function(){this.paused&&t.updatePlaying.apply(this)},whileplaying:function(){t.updatePlaying.apply(this),this._360data.fps++},bufferchange:function(){this.isBuffering?i.addClass(this._360data.oUIBox,i.css.sBuffering):i.removeClass(this._360data.oUIBox,i.css.sBuffering)}},this.stopEvent=function(t){return"undefined"!=typeof t&&"undefined"!=typeof t.preventDefault?t.preventDefault():"undefined"!=typeof e.event&&"undefined"!=typeof e.event.returnValue&&(e.event.returnValue=!1),!1},this.getTheDamnLink=r?function(t){return t&&t.target?t.target:e.event.srcElement}:function(e){return e.target},this.handleClick=function(i){if(i.button>1)return!0;var s,r,o,a,l,c,d=t.getTheDamnLink(i);return"a"===d.nodeName.toLowerCase()||(d=t.isChildOfNode(d,"a"))?t.isChildOfClass(d,"ui360")?(s=d.getAttribute("href"),d.href&&n.canPlayLink(d)&&!t.hasClass(d,t.excludeClass)?(n._writeDebug("handleClick()"),r=d.href,o=t.getSoundByURL(r),o?o===t.lastSound?o.togglePause():(o.togglePause(),n._writeDebug("sound different than last sound: "+t.lastSound.id),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound)):(a=d.parentNode,l=t.getElementsByClassName("ui360-vis","div",a.parentNode).length,o=n.createSound({id:"ui360Sound"+t.soundCount++,url:r,onplay:t.events.play,onstop:t.events.stop,onpause:t.events.pause,onresume:t.events.resume,onfinish:t.events.finish,onbufferchange:t.events.bufferchange,type:d.type||null,whileloading:t.events.whileloading,whileplaying:t.events.whileplaying,useWaveformData:l&&t.config.useWaveformData,useEQData:l&&t.config.useEQData,usePeakData:l&&t.config.usePeakData}),c=parseInt(t.getElementsByClassName("sm2-360ui","div",a)[0].offsetWidth,10),o._360data={oUI360:t.getParentByClassName(d,"ui360"),oLink:d,className:t.css.sPlaying,oUIBox:t.getElementsByClassName("sm2-360ui","div",a)[0],oCanvas:t.getElementsByClassName("sm2-canvas","canvas",a)[0],oButton:t.getElementsByClassName("sm2-360btn","span",a)[0],oTiming:t.getElementsByClassName("sm2-timing","div",a)[0],oCover:t.getElementsByClassName("sm2-cover","div",a)[0],circleDiameter:c,circleRadius:c/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:t.config.fontSizeMax,scaleFont:l&&t.config.scaleFont,showHMSTime:l,amplifier:l&&t.config.usePeakData?.9:1,radiusMax:.175*c,width:0,widthMax:.4*c,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:!1,oAnim:new e.Animator({duration:t.config.animDuration,transition:t.config.animTransition,onComplete:function(){}}),oAnimProgress:function(e){var i=this;i._360data.radius=parseInt(i._360data.radiusMax*i._360data.amplifier*e,10),i._360data.width=parseInt(i._360data.widthMax*i._360data.amplifier*e,10),i._360data.scaleFont&&null!==i._360data.fontSizeMax&&(i._360data.oTiming.style.fontSize=parseInt(Math.max(1,i._360data.fontSizeMax*e),10)+"px",i._360data.oTiming.style.opacity=e),(i.paused||0===i.playState||0===i._360data.lastValues.bytesLoaded||0===i._360data.lastValues.position)&&t.updatePlaying.apply(i)},fps:0},"undefined"!=typeof t.Metadata&&t.getElementsByClassName("metadata","div",o._360data.oUI360).length&&(o._360data.metadata=new t.Metadata(o,t)),o._360data.scaleFont&&null!==o._360data.fontSizeMax&&(o._360data.oTiming.style.fontSize="1px"),o._360data.oAnim.addSubject(o._360data.oAnimProgress,o),t.refreshCoords(o),t.updatePlaying.apply(o),t.soundsByURL[r]=o,t.sounds.push(o),!t.config.allowMultiple&&t.lastSound&&t.stopSound(t.lastSound),o.play()),t.lastSound=o,"undefined"!=typeof i&&"undefined"!=typeof i.preventDefault?i.preventDefault():"undefined"!=typeof e.event&&(e.event.returnValue=!1),!1):!0):!0:!0},this.fanOut=function(i){var n=i;return 1===n._360data.animating?!1:(n._360data.animating=0,soundManager._writeDebug("fanOut: "+n.id+": "+n._360data.oLink.href),n._360data.oAnim.seekTo(1),e.setTimeout(function(){n._360data.animating=0},t.config.animDuration+20),void 0)},this.fanIn=function(i){var n=i;return-1===n._360data.animating?!1:(n._360data.animating=-1,soundManager._writeDebug("fanIn: "+n.id+": "+n._360data.oLink.href),n._360data.oAnim.seekTo(0),e.setTimeout(function(){n._360data.didFinish=!1,n._360data.animating=0,t.resetLastValues(n)},t.config.animDuration+20),void 0)},this.resetLastValues=function(e){e._360data.lastValues.position=0},this.refreshCoords=function(e){e._360data.canvasXY=t.findXY(e._360data.oCanvas),e._360data.canvasMid=[e._360data.circleRadius,e._360data.circleRadius],e._360data.canvasMidXY=[e._360data.canvasXY[0]+e._360data.canvasMid[0],e._360data.canvasXY[1]+e._360data.canvasMid[1]]},this.stopSound=function(e){soundManager._writeDebug("stopSound: "+e.id),soundManager.stop(e.id),c||soundManager.unload(e.id)},this.buttonClick=function(i){var n=i?i.target?i.target:i.srcElement:e.event.srcElement;return t.handleClick({target:t.getParentByClassName(n,"sm2-360ui").nextSibling}),!1},this.buttonMouseDown=function(e){return c?t.addEventHandler(document,"touchmove",t.mouseDown):document.onmousemove=function(e){t.mouseDown(e)},t.stopEvent(e),!1},this.mouseDown=function(i){if(!c&&i.button>1)return!0;if(!t.lastSound)return t.stopEvent(i),!1;var n,s,r,o=i?i:e.event;return c&&o.touches&&(o=o.touches[0]),n=o.target||o.srcElement,s=t.getSoundByURL(t.getElementsByClassName("sm2_link","a",t.getParentByClassName(n,"ui360"))[0].href),t.lastTouchedSound=s,t.refreshCoords(s),r=s._360data,t.addClass(r.oUIBox,"sm2_dragging"),r.pauseCount=t.lastTouchedSound.paused?1:0,t.mmh(i?i:e.event),c?(t.removeEventHandler(document,"touchmove",t.mouseDown),t.addEventHandler(document,"touchmove",t.mmh),t.addEventHandler(document,"touchend",t.mouseUp)):(document.onmousemove=t.mmh,document.onmouseup=t.mouseUp),t.stopEvent(i),!1},this.mouseUp=function(){var e=t.lastTouchedSound._360data;t.removeClass(e.oUIBox,"sm2_dragging"),0===e.pauseCount&&t.lastTouchedSound.resume(),c?(t.removeEventHandler(document,"touchmove",t.mmh),t.removeEventHandler(document,"touchend",t.mouseUP)):(document.onmousemove=null,document.onmouseup=null)},this.mmh=function(i){"undefined"==typeof i&&(i=e.event);var n=t.lastTouchedSound,s=t.getMouseXY(i),r=s[0],o=s[1],a=r-n._360data.canvasMidXY[0],l=o-n._360data.canvasMidXY[1],c=Math.floor(u-(t.rad2deg(Math.atan2(a,l))+180));return n.setPosition(n.durationEstimate*(c/u)),t.stopEvent(i),!1},this.drawSolidArc=function(e,i,n,s,r,l,c){var d,u,h,p,f=e;f.getContext&&(d=f.getContext("2d")),e=d,c||t.clearCanvas(f),i&&(d.fillStyle=i),e.beginPath(),isNaN(r)&&(r=0),u=n-s,h=o||a,(!h||h&&n>0)&&(e.arc(0,0,n,l,r,!1),p=t.getArcEndpointCoords(u,r),e.lineTo(p.x,p.y),e.arc(0,0,u,r,l,!0),e.closePath(),e.fill())},this.getArcEndpointCoords=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},this.deg2rad=function(e){return e*Math.PI/180},this.rad2deg=function(e){return 180*e/Math.PI},this.getTime=function(e,t){var i=Math.floor(e/1e3),n=Math.floor(i/60),s=i-60*n;return t?n+":"+(10>s?"0"+s:s):{min:n,sec:s}},this.clearCanvas=function(e){var t,i,n=e,s=null;n.getContext&&(s=n.getContext("2d")),t=n.offsetWidth,i=n.offsetHeight,s.clearRect(-(t/2),-(i/2),t,i)},this.updatePlaying=function(){var e=t.config.showHMSTime||this._360data.showHMSTime?t.getTime(this.position,!0):parseInt(this.position/1e3,10),i=t.config.scaleArcWidth;this.bytesLoaded&&(this._360data.lastValues.bytesLoaded=this.bytesLoaded,this._360data.lastValues.bytesTotal=this.bytesTotal),this.position&&(this._360data.lastValues.position=this.position),this.durationEstimate&&(this._360data.lastValues.durationEstimate=this.durationEstimate),t.drawSolidArc(this._360data.oCanvas,t.config.backgroundRingColor,this._360data.width,this._360data.radius*i,t.deg2rad(u),!1),t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.loadRingColorMetadata:t.config.loadRingColor,this._360data.width,this._360data.radius*i,t.deg2rad(u*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,!0),0!==this._360data.lastValues.position&&t.drawSolidArc(this._360data.oCanvas,this._360data.metadata?t.config.playRingColorMetadata:t.config.playRingColor,this._360data.width,this._360data.radius*i,t.deg2rad(1===this._360data.didFinish?u:u*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate)),0,!0),this._360data.metadata&&this._360data.metadata.events.whileplaying(),e!==this._360data.lastTime&&(this._360data.lastTime=e,this._360data.oTiming.innerHTML=e),(this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&d&&t.updateWaveform(this),t.config.useFavIcon&&t.vuMeter&&t.vuMeter.updateVU(this)},this.updateWaveform=function(e){if(!t.config.useWaveformData&&!t.config.useEQData||!n.features.waveformData&&!n.features.eqData)return!1;if(!e.waveformData.left.length&&!e.eqData.length&&!e.peakData.left)return!1;var i,s,r,o,a,l,c,d,u,h,p,f,m,g,_,v,y=(e._360data.oCanvas.getContext("2d"),parseInt(e._360data.circleDiameter/2,10)),b=y/2;if(t.config.useWaveformData)for(o=t.config.waveformDataDownsample,o=Math.max(1,o),a=256,l=a/o,c=0,d=0,u=null,h=t.config.waveformDataOutside?1:t.config.waveformDataConstrain?.5:.565,b=t.config.waveformDataOutside?.7:.75,p=t.deg2rad(360/l*t.config.waveformDataLineRatio),i=0;a>i;i+=o)c=t.deg2rad(360*(1*(i/l)/o)),d=c+p,u=e.waveformData.left[i],0>u&&t.config.waveformDataConstrain&&(u=Math.abs(u)),t.drawSolidArc(e._360data.oCanvas,t.config.waveformDataColor,e._360data.width*h*(2-t.config.scaleArcWidth),1.25*e._360data.radius*b*u,d,c,!0);if(t.config.useEQData)for(o=t.config.eqDataDownsample,f=0,o=Math.max(1,o),m=192,l=m/o,h=t.config.eqDataOutside?1:.565,r=t.config.eqDataOutside?-1:1,b=t.config.eqDataOutside?.5:.75,c=0,d=0,p=t.deg2rad(360/l*t.config.eqDataLineRatio),g=t.deg2rad(1===e._360data.didFinish?360:360*(e._360data.lastValues.position/e._360data.lastValues.durationEstimate)),s=0,_=0,i=0;m>i;i+=o)c=t.deg2rad(360*(i/m)),d=c+p,t.drawSolidArc(e._360data.oCanvas,d>g?t.config.eqDataColor:t.config.playRingColor,e._360data.width*h,e._360data.radius*b*e.eqData.left[i]*r,d,c,!0);if(t.config.usePeakData&&!e._360data.animating){for(v=e.peakData.left||e.peakData.right,m=3,i=0;m>i;i++)v=v||e.eqData[i];e._360data.amplifier=t.config.useAmplifier?.9+.1*v:1,e._360data.radiusMax=.175*e._360data.circleDiameter*e._360data.amplifier,e._360data.widthMax=.4*e._360data.circleDiameter*e._360data.amplifier,e._360data.radius=parseInt(e._360data.radiusMax*e._360data.amplifier,10),e._360data.width=parseInt(e._360data.widthMax*e._360data.amplifier,10)}},this.getUIHTML=function(e){return['<canvas class="sm2-canvas" width="'+e+'" height="'+e+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?" alignTweak":"")+'"></div>',' <div class="sm2-cover"></div>']},this.uiTest=function(e){var i,n,s,r,o,a,l,c,d,u=document.createElement("div");return u.className="sm2-360ui",i=document.createElement("div"),i.className="ui360"+(e?" "+e:""),n=i.appendChild(u.cloneNode(!0)),i.style.position="absolute",i.style.left="-9999px",s=document.body.appendChild(i),r=n.offsetWidth,o=t.getUIHTML(r),n.innerHTML=o[1]+o[2]+o[3],a=parseInt(n.offsetWidth,10),l=parseInt(a/2,10),d=t.getElementsByClassName("sm2-timing","div",s)[0],c=parseInt(t.getStyle(d,"font-size"),10),isNaN(c)&&(c=null),i.parentNode.removeChild(i),o=i=n=s=null,{circleDiameter:a,circleRadius:l,fontSizeMax:c}},this.init=function(){n._writeDebug("threeSixtyPlayer.init()");var i,s,o,a,l,d,u,h,p,f,m,g,_,v,y=t.getElementsByClassName("ui360","div"),b=[],k=!1,w=0;for(i=0,s=y.length;s>i;i++){var C=y[i].getElementsByTagName("a")[0];if(t.config.fallbackFormat&&t.config.fallbackFromFormat&&t.config.fallbackToFormat){var A=new RegExp("\\"+t.config.fallbackFromFormat+"\\s*$","i");C.href=C.href.replace(A,t.config.fallbackToFormat)}b.push(C),y[i].style.backgroundImage="none"}for(t.oUITemplate=document.createElement("div"),t.oUITemplate.className="sm2-360ui",t.oUITemplateVis=document.createElement("div"),t.oUITemplateVis.className="sm2-360ui",h=t.uiTest(),t.config.circleDiameter=h.circleDiameter,t.config.circleRadius=h.circleRadius,p=t.uiTest("ui360-vis"),t.config.fontSizeMax=p.fontSizeMax,t.oUITemplate.innerHTML=t.getUIHTML(t.config.circleDiameter).join(""),t.oUITemplateVis.innerHTML=t.getUIHTML(p.circleDiameter).join(""),i=0,s=b.length;s>i;i++)!n.canPlayLink(b[i])||t.hasClass(b[i],t.excludeClass)||t.hasClass(b[i],t.css.sDefault)||(t.addClass(b[i],t.css.sDefault),t.links[w]=b[i],t.indexByURL[b[i].href]=w,w++,k=t.hasClass(b[i].parentNode,"ui360-vis"),d=(k?p:h).circleDiameter,u=(k?p:h).circleRadius,f=b[i].parentNode.insertBefore((k?t.oUITemplateVis:t.oUITemplate).cloneNode(!0),b[i]),r&&"undefined"!=typeof e.G_vmlCanvasManager?(g=b[i].parentNode,_=document.createElement("canvas"),_.className="sm2-canvas",v="sm2_canvas_"+parseInt(1048576*Math.random(),10),_.id=v,_.width=d,_.height=d,f.appendChild(_),e.G_vmlCanvasManager.initElement(_),o=document.getElementById(v)):o=b[i].parentNode.getElementsByTagName("canvas")[0],l=t.getElementsByClassName("sm2-cover","div",b[i].parentNode)[0],m=b[i].parentNode.getElementsByTagName("span")[0],t.addEventHandler(m,"click",t.buttonClick),c?t.addEventHandler(l,"touchstart",t.mouseDown):t.addEventHandler(l,"mousedown",t.mouseDown),a=o.getContext("2d"),a.translate(u,u),a.rotate(t.deg2rad(-90)));w>0&&(t.addEventHandler(document,"click",t.handleClick),t.config.autoPlay&&t.handleClick({target:t.links[0],preventDefault:function(){}})),n._writeDebug("threeSixtyPlayer.init(): Found "+w+" relevant items."),t.config.useFavIcon&&"undefined"!=typeof this.VUMeter&&(this.vuMeter=new this.VUMeter(this))}}t.prototype.VUMeter=function(e){var t=e,i=this,n=document.getElementsByTagName("head")[0],s=navigator.userAgent.match(/opera/i),r=navigator.userAgent.match(/firefox/i);this.vuMeterData=[],this.vuDataCanvas=null,this.setPageIcon=function(e){if(!t.config.useFavIcon||!t.config.usePeakData||!e)return!1;var i=document.getElementById("sm2-favicon");i&&(n.removeChild(i),i=null),i||(i=document.createElement("link"),i.id="sm2-favicon",i.rel="shortcut icon",i.type="image/png",i.href=e,document.getElementsByTagName("head")[0].appendChild(i))},this.resetPageIcon=function(){if(!t.config.useFavIcon)return!1;var e=document.getElementById("favicon");e&&(e.href="/favicon.ico")},this.updateVU=function(e){soundManager.flashVersion>=9&&t.config.useFavIcon&&t.config.usePeakData&&i.setPageIcon(i.vuMeterData[parseInt(16*e.peakData.left,10)][parseInt(16*e.peakData.right,10)])},this.createVUData=function(){var e=0,t=0,n=i.vuDataCanvas.getContext("2d"),s=n.createLinearGradient(0,16,0,0),r=n.createLinearGradient(0,16,0,0),o="rgba(0,0,0,0.2)";for(s.addColorStop(0,"rgb(0,192,0)"),s.addColorStop(.3,"rgb(0,255,0)"),s.addColorStop(.625,"rgb(255,255,0)"),s.addColorStop(.85,"rgb(255,0,0)"),r.addColorStop(0,o),r.addColorStop(1,"rgba(0,0,0,0.5)"),e=0;16>e;e++)i.vuMeterData[e]=[];for(e=0;16>e;e++)for(t=0;16>t;t++)i.vuDataCanvas.setAttribute("width",16),i.vuDataCanvas.setAttribute("height",16),n.fillStyle=r,n.fillRect(0,0,7,15),n.fillRect(8,0,7,15),n.fillStyle=s,n.fillRect(0,15-e,7,16-(16-e)),n.fillRect(8,15-t,7,16-(16-t)),n.clearRect(0,3,16,1),n.clearRect(0,7,16,1),n.clearRect(0,11,16,1),i.vuMeterData[e][t]=i.vuDataCanvas.toDataURL("image/png")},this.testCanvas=function(){var e,t=document.createElement("canvas"),i=null;if(!t||"undefined"==typeof t.getContext)return null;if(i=t.getContext("2d"),!i||"function"!=typeof t.toDataURL)return null;try{e=t.toDataURL("image/png")}catch(n){return null}return t},this.init=function(){t.config.useFavIcon&&(i.vuDataCanvas=i.testCanvas(),i.vuDataCanvas&&(r||s)?i.createVUData():t.config.useFavIcon=!1)},this.init()},t.prototype.Metadata=function(e,t){soundManager._wD("Metadata()");var i,n,s=this,r=e._360data.oUI360,o=r.getElementsByTagName("ul")[0],a=o.getElementsByTagName("li");for(navigator.userAgent.match(/firefox/i),this.lastWPExec=0,this.refreshInterval=250,this.totalTime=0,this.events={whileplaying:function(){var i,n,r,o=e._360data.width,a=e._360data.radius,l=e.durationEstimate||1e3*s.totalTime,c=null;for(i=0,n=s.data.length;n>i;i++)c=0===i%2,t.drawSolidArc(e._360data.oCanvas,c?t.config.segmentRingColorAlt:t.config.segmentRingColor,c?o:o,c?a/2:a/2,t.deg2rad(360*(s.data[i].endTimeMS/l)),t.deg2rad(360*((s.data[i].startTimeMS||1)/l)),!0);r=new Date,r-s.lastWPExec>s.refreshInterval&&(s.refresh(),s.lastWPExec=r)}},this.refresh=function(){var t,i,n=null,s=e.position,r=e._360data.metadata.data;for(t=0,i=r.length;i>t;t++)if(s>=r[t].startTimeMS&&s<=r[t].endTimeMS){n=t;break}n!==r.currentItem&&n<r.length&&(e._360data.oLink.innerHTML=r.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+r[n].title+"</span></span>",r.currentItem=n)},this.strToTime=function(e){var t,i=e.split(":"),n=0;for(t=i.length;t--;)n+=parseInt(i[t],10)*Math.pow(60,i.length-1-t);return n},this.data=[],this.data.givenDuration=null,this.data.currentItem=null,this.data.mainTitle=e._360data.oLink.innerHTML,i=0;i<a.length;i++)this.data[i]={o:null,title:a[i].getElementsByTagName("p")[0].innerHTML,startTime:a[i].getElementsByTagName("span")[0].innerHTML,startSeconds:s.strToTime(a[i].getElementsByTagName("span")[0].innerHTML.replace(/[()]/g,"")),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};for(n=t.getElementsByClassName("duration","div",r),this.data.givenDuration=n.length?1e3*s.strToTime(n[0].innerHTML):0,i=0;i<this.data.length;i++)this.data[i].duration=parseInt(this.data[i+1]?this.data[i+1].startSeconds:(s.data.givenDuration?s.data.givenDuration:e.durationEstimate)/1e3,10)-this.data[i].startSeconds,this.data[i].startTimeMS=1e3*this.data[i].startSeconds,this.data[i].durationMS=1e3*this.data[i].duration,this.data[i].endTimeMS=this.data[i].startTimeMS+this.data[i].durationMS,this.totalTime+=this.data[i].duration},navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)&&soundManager.setup({useHTML5Audio:!0}),soundManager.setup({html5PollingInterval:50,debugMode:e.location.href.match(/debug=1/i),consoleOnly:!0,flashVersion:9,useHighPerformance:!0,useFlashBlock:!0}),soundManager.debugMode&&e.setInterval(function(){var t=e.threeSixtyPlayer;t&&t.lastSound&&t.lastSound._360data.fps&&"undefined"==typeof e.isHome&&(soundManager._writeDebug("fps: ~"+t.lastSound._360data.fps),t.lastSound._360data.fps=0)},1e3),e.ThreeSixtyPlayer=t}(window),threeSixtyPlayer=new ThreeSixtyPlayer,soundManager.onready(threeSixtyPlayer.init),function(e){custom_options={loadRingColor:"#e9e9e9",playRingColor:"#444",backgroundRingColor:"#e9e9e9",animDuration:500,scaleArcWidth:.7,showHMSTime:!0,animTransition:Animator.tx.bouncy,playCallback:function(e){jQuery(".ui360.playing").removeClass("playing").find("a").show(),jQuery(e._360data.oUIBox).parent().addClass("playing").find("a").hide();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.addClass("playing")},finishCallback:function(e){jQuery(e._360data.oUIBox).parent().removeClass("playing").find("a").show();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.removeClass("playing")},stopCallback:function(e){jQuery(e._360data.oUIBox).parent().removeClass("playing").find("a").show();var t=jQuery(e._360data.oUIBox).parents(".attached_file, .recorded-message").eq(0);0!==t.length&&t.removeClass("playing")},fallbackFormat:jQuery.browser.mozilla||jQuery.browser.opera},threeSixtyPlayer&&threeSixtyPlayer.config&&e.extend(threeSixtyPlayer.config,custom_options)}(jQuery),/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw new Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=i.dayNames,n=i.abbreviatedDayNames,s=i.shortestDayNames,r=e.toLowerCase(),o=0;o<t.length;o++)if(t[o].toLowerCase()==r||n[o].toLowerCase()==r||s[o].toLowerCase()==r)return o;return-1},e.getMonthNumberFromName=function(e){for(var t=i.monthNames,n=i.abbreviatedMonthNames,s=e.toLowerCase(),r=0;r<t.length;r++)if(t[r].toLowerCase()==s||n[r].toLowerCase()==s)return r;return-1},e.isLeapYear=function(e){return 0===e%4&&0!==e%100||0===e%400},e.getDaysInMonth=function(t,i){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][i]},e.getTimezoneAbbreviation=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].offset===e)return t[n].name;return null},e.getTimezoneOffset=function(e){for(var t=i.timezones,n=0;n<t.length;n++)if(t[n].name===e.toUpperCase())return t[n].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=function(){return this.isSameDay(new Date)},t.isSameDay=function(e){return this.clone().clearTime().equals(e.clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(i,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var s,r,o;t.getWeek=function(){var e,t,i,n,a,l,c,d,u,h;return s=s?s:this.getFullYear(),r=r?r:this.getMonth()+1,o=o?o:this.getDate(),2>=r?(e=s-1,t=(0|e/4)-(0|e/100)+(0|e/400),i=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),u=t-i,a=0,l=o-1+31*(r-1)):(e=s,t=(0|e/4)-(0|e/100)+(0|e/400),i=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),u=t-i,a=u+1,l=o+(153*(r-3)+2)/5+58+u),c=(e+t)%7,n=(l+c-a)%7,d=0|l+3-n,h=0>d?53-(0|(c-u)/5):d>364+u?1:(0|d/7)+1,s=r=o=null,h},t.getISOWeek=function(){return s=this.getUTCFullYear(),r=this.getUTCMonth()+1,o=this.getUTCDate(),n(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())},e._validate=function(e,t,i,n){if("undefined"==typeof e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>i)throw new RangeError(e+" is not a valid value for "+n+".");return!0},e.validateMillisecond=function(t){return e._validate(t,0,999,"millisecond")},e.validateSecond=function(t){return e._validate(t,0,59,"second")},e.validateMinute=function(t){return e._validate(t,0,59,"minute")},e.validateHour=function(t){return e._validate(t,0,23,"hour")},e.validateDay=function(t,i,n){return e._validate(t,1,e.getDaysInMonth(i,n),"day")},e.validateMonth=function(t){return e._validate(t,0,11,"month")},e.validateYear=function(t){return e._validate(t,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&e._validate(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var i=0;if(t>0)i=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(i)},t.moveToDayOfWeek=function(e,t){var i=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===i?i+=7*(t||1):i)},t.moveToMonth=function(e,t){var i=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===i?i+=12*(t||1):i)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),i=-6*Number(e)/10;return this.addMinutes(i-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=(t-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(t+1e4).toString(),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),void 0==t._toString&&(t._toString=t.toString),t.toString=function(e){var t=this;if(e&&1==e.length){var s=i.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(s.shortDate);case"D":return t.t(s.longDate);case"F":return t.t(s.fullDateTime);case"m":return t.t(s.monthDay);case"r":return t.t(s.rfc1123);case"s":return t.t(s.sortableDateTime);case"t":return t.t(s.shortTime);case"T":return t.t(s.longTime);case"u":return t.t(s.universalSortableDateTime);case"y":return t.t(s.yearMonth)}}var r=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return n(t.h()<13?0===t.h()?12:t.h():t.h()-12);case"h":return t.h()<13?0===t.h()?12:t.h():t.h()-12;case"HH":return n(t.h());case"H":return t.h();case"mm":return n(t.getMinutes());case"m":return t.getMinutes();case"ss":return n(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return n(t.getFullYear(),4);case"yy":return n(t.getFullYear());case"dddd":return i.dayNames[t.getDay()];case"ddd":return i.abbreviatedDayNames[t.getDay()];case"dd":return n(t.getDate());case"d":return t.getDate();case"MMMM":return i.monthNames[t.getMonth()];case"MMM":return i.abbreviatedMonthNames[t.getMonth()];case"MM":return n(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?i.amDesignator.substring(0,1):i.pmDesignator.substring(0,1);case"tt":return t.h()<12?i.amDesignator:i.pmDesignator;case"S":return r(t.getDate());default:return e}}):this._toString()}}(),function(){var e=Date,t=e.prototype,i=e.CultureInfo,n=Number.prototype;t._orient=1,t._nth=null,t._is=!1,t._same=!1,t._isSecond=!1,n._dateElement="day",t.next=function(){return this._orient=1,this},e.next=function(){return e.today().next()},t.last=t.prev=t.previous=function(){return this._orient=-1,this},e.last=e.prev=e.previous=function(){return e.today().last()},t.is=function(){return this._is=!0,this},t.same=function(){return this._same=!0,this._isSecond=!1,this},t.today=function(){return this.same().day()},t.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},t.at=function(t){return"string"==typeof t?e.parse(this.toString("d")+" "+t):this.set(t)},n.fromNow=n.after=function(e){var t={};return t[this._dateElement]=this,(e?e.clone():new Date).add(t)},n.ago=n.before=function(e){var t={};return t[this._dateElement]=-1*this,(e?e.clone():new Date).add(t)};var s,r="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),o="january february march april may june july august september october november december".split(/\s/),a="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),l="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),c="final first second third fourth fifth".split(/\s/);t.toObject=function(){for(var e={},t=0;t<a.length;t++)e[a[t].toLowerCase()]=this["get"+l[t]]();return e},e.fromObject=function(e){return e.week=null,Date.today().set(e)};for(var d=function(t){return function(){if(this._is)return this._is=!1,this.getDay()==t;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var i=this._nth;this._nth=null;var n=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(t,i),this>n)throw new RangeError(e.getDayName(t)+" does not occur "+i+" times in the month of "+e.getMonthName(n.getMonth())+" "+n.getFullYear()+".");return this}return this.moveToDayOfWeek(t,this._orient)}},u=function(t){return function(){var n=e.today(),s=t-n.getDay();return 0===t&&1===i.firstDayOfWeek&&0!==n.getDay()&&(s+=7),n.addDays(s)}},h=0;h<r.length;h++)e[r[h].toUpperCase()]=e[r[h].toUpperCase().substring(0,3)]=h,e[r[h]]=e[r[h].substring(0,3)]=u(h),t[r[h]]=t[r[h].substring(0,3)]=d(h);for(var p=function(e){return function(){return this._is?(this._is=!1,this.getMonth()===e):this.moveToMonth(e,this._orient)}},f=function(t){return function(){return e.today().set({month:t,day:1})}},m=0;m<o.length;m++)e[o[m].toUpperCase()]=e[o[m].toUpperCase().substring(0,3)]=m,e[o[m]]=e[o[m].substring(0,3)]=f(m),t[o[m]]=t[o[m].substring(0,3)]=p(m);for(var g=function(e){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var t=this.toObject(),i=(arguments[0]||new Date).toObject(),n="",s=e.toLowerCase(),r=a.length-1;r>-1;r--){if(n=a[r].toLowerCase(),t[n]!=i[n])return!1;if(s==n)break}return!0}return"s"!=e.substring(e.length-1)&&(e+="s"),this["add"+e](this._orient)}},_=function(e){return function(){return this._dateElement=e,this}},v=0;v<a.length;v++)s=a[v].toLowerCase(),t[s]=t[s+"s"]=g(a[v]),n[s]=n[s+"s"]=_(s);t._ss=g("Second");for(var y=function(e){return function(t){return this._same?this._ss(arguments[0]):t||0===t?this.moveToNthOccurrence(t,e):(this._nth=e,2!==e||void 0!==t&&null!==t?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},b=0;b<c.length;b++)t[c[b]]=0===b?y(-1):y(b)}(),function(){Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var e=Date.Parsing,t=e.Operators={rtoken:function(t){return function(i){var n=i.match(t);if(n)return[n[0],i.substring(n[0].length)];throw new e.Exception(i)}},token:function(){return function(e){return t.rtoken(new RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return t.rtoken(new RegExp("^"+e))},until:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(s){i.push(n[0]),t=n[1];continue}break}return[i,t]}},many:function(e){return function(t){for(var i=[],n=null;t.length;){try{n=e.call(this,t)}catch(s){return[i,t]}i.push(n[0]),t=n[1]}return[i,t]}},optional:function(e){return function(t){var i=null;try{i=e.call(this,t)}catch(n){return[null,t]}return[i[0],i[1]]}},not:function(t){return function(i){try{t.call(this,i)}catch(n){return[null,i]}throw new e.Exception(i)}},ignore:function(e){return e?function(t){var i=null;return i=e.call(this,t),[null,i[1]]}:null},product:function(){for(var e=arguments[0],i=Array.prototype.slice.call(arguments,1),n=[],s=0;s<e.length;s++)n.push(t.each(e[s],i));return n},cache:function(t){var i={},n=null;return function(s){try{n=i[s]=i[s]||t.call(this,s)}catch(r){n=i[s]=r}if(n instanceof e.Exception)throw n;return n}},any:function(){var t=arguments;return function(i){for(var n=null,s=0;s<t.length;s++)if(null!=t[s]){try{n=t[s].call(this,i)}catch(r){n=null}if(n)return n}throw new e.Exception(i)}},each:function(){var t=arguments;return function(i){for(var n=[],s=null,r=0;r<t.length;r++)if(null!=t[r]){try{s=t[r].call(this,i)}catch(o){throw new e.Exception(i)}n.push(s[0]),i=s[1]}return[n,i]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(i,n,s){return n=n||t.rtoken(/^\s*/),s=s||null,1==i.length?i[0]:function(t){for(var r=null,o=null,a=[],l=0;l<i.length;l++){try{r=i[l].call(this,t)}catch(c){break}a.push(r[0]);try{o=n.call(this,r[1])}catch(d){o=null;break}t=o[1]}if(!r)throw new e.Exception(t);if(o)throw new e.Exception(o[1]);if(s)try{r=s.call(this,r[1])}catch(u){throw new e.Exception(r[1])}return[a,r?r[1]:t]}},between:function(e,i,n){n=n||e;var s=t.each(t.ignore(e),i,t.ignore(n));return function(e){var t=s.call(this,e);return[[t[0][0],r[0][2]],t[1]]}},list:function(e,i,n){return i=i||t.rtoken(/^\s*/),n=n||null,e instanceof Array?t.each(t.product(e.slice(0,-1),t.ignore(i)),e.slice(-1),t.ignore(n)):t.each(t.many(t.each(e,t.ignore(i))),px,t.ignore(n))},set:function(i,n,s){return n=n||t.rtoken(/^\s*/),s=s||null,function(r){for(var o=null,a=null,l=null,c=null,d=[[],r],u=!1,h=0;h<i.length;h++){l=null,a=null,o=null,u=1==i.length;try{o=i[h].call(this,r)}catch(p){continue}if(c=[[o[0]],o[1]],o[1].length>0&&!u)try{l=n.call(this,o[1])}catch(f){u=!0}else u=!0;if(u||0!==l[1].length||(u=!0),!u){for(var m=[],g=0;g<i.length;g++)h!=g&&m.push(i[g]);a=t.set(m,n).call(this,l[1]),a[0].length>0&&(c[0]=c[0].concat(a[0]),c[1]=a[1])}if(c[1].length<d[1].length&&(d=c),0===d[1].length)break}if(0===d[0].length)return d;if(s){try{l=s.call(this,d[1])}catch(_){throw new e.Exception(d[1])}d[1]=l[1]}return d}},forward:function(e,t){return function(i){return e[t].call(this,i)}},replace:function(e,t){return function(i){var n=e.call(this,i);return[t,n[1]]}},process:function(e,t){return function(i){var n=e.call(this,i);return[t.call(this,n[0]),n[1]]}},min:function(t,i){return function(n){var s=i.call(this,n);if(s[0].length<t)throw new e.Exception(n);return s}}},i=function(e){return function(){var t=null,i=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var n=0,s=t.shift();n<s.length;n++)return t.unshift(s[n]),i.push(e.apply(null,t)),t.shift(),i}},n="optional not ignore cache".split(/\s/),s=0;s<n.length;s++)t[n[s]]=i(t[n[s]]);for(var o=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},a="each any all".split(/\s/),l=0;l<a.length;l++)t[a[l]]=o(t[a[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),i=function(e){for(var t=[],n=0;n<e.length;n++)e[n]instanceof Array?t=t.concat(i(e[n])):e[n]&&t.push(e[n]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var i=Number(e);this.year=e.length>2?i:i+(i+2e3<t.twoDigitYearMax?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var i=0;i<t.length;i++)t[i]&&t[i].call(this);var n=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=n.getDate()),this.year||(this.year=n.getFullYear()),this.month||0===this.month||(this.month=n.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var s=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?s.set({timezone:this.timezone}):this.timezoneOffset&&s.set({timezoneOffset:this.timezoneOffset}),s},finish:function(t){if(t=t instanceof Array?i(t):[t],0===t.length)return null;for(var n=0;n<t.length;n++)"function"==typeof t[n]&&t[n].call(this);var s=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(s=new Date);var r,o,a,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(a="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||s.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",r=e.getDayNumberFromName(this.weekday)-s.getDay(),o=7,this.days=r?(r+a*o)%o:a*o),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(s.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",r=this.month-s.getMonth(),o=12,this.months=r?(r+a*o)%o:a*o,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*a:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*a),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==s.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?s.add(this):s.set(this)):Date.today().setWeek(this.value)}};var n,s=e.Parsing.Operators,r=e.Grammar,o=e.Translator;r.datePartDelimiter=s.rtoken(/^([\s\-\.\,\/\x27]+)/),r.timePartDelimiter=s.stoken(":"),r.whiteSpace=s.rtoken(/^\s*/),r.generalDelimiter=s.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};r.ctoken=function(e){var i=a[e];if(!i){for(var n=t.regexPatterns,r=e.split(/\s+/),o=[],l=0;l<r.length;l++)o.push(s.replace(s.rtoken(n[r[l]]),r[l]));i=a[e]=s.any.apply(null,o)}return i},r.ctoken2=function(e){return s.rtoken(t.regexPatterns[e])},r.h=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),o.hour)),r.hh=s.cache(s.process(s.rtoken(/^(0[0-9]|1[0-2])/),o.hour)),r.H=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),o.hour)),r.HH=s.cache(s.process(s.rtoken(/^([0-1][0-9]|2[0-3])/),o.hour)),r.m=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),o.minute)),r.mm=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),o.minute)),r.s=s.cache(s.process(s.rtoken(/^([0-5][0-9]|[0-9])/),o.second)),r.ss=s.cache(s.process(s.rtoken(/^[0-5][0-9]/),o.second)),r.hms=s.cache(s.sequence([r.H,r.m,r.s],r.timePartDelimiter)),r.t=s.cache(s.process(r.ctoken2("shortMeridian"),o.meridian)),r.tt=s.cache(s.process(r.ctoken2("longMeridian"),o.meridian)),r.z=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),r.zz=s.cache(s.process(s.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),o.timezone)),r.zzz=s.cache(s.process(r.ctoken2("timezone"),o.timezone)),r.timeSuffix=s.each(s.ignore(r.whiteSpace),s.set([r.tt,r.zzz])),r.time=s.each(s.optional(s.ignore(s.stoken("T"))),r.hms,r.timeSuffix),r.d=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1]|\d)/),s.optional(r.ctoken2("ordinalSuffix"))),o.day)),r.dd=s.cache(s.process(s.each(s.rtoken(/^([0-2]\d|3[0-1])/),s.optional(r.ctoken2("ordinalSuffix"))),o.day)),r.ddd=r.dddd=s.cache(s.process(r.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),r.M=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d|\d)/),o.month)),r.MM=s.cache(s.process(s.rtoken(/^(1[0-2]|0\d)/),o.month)),r.MMM=r.MMMM=s.cache(s.process(r.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),o.month)),r.y=s.cache(s.process(s.rtoken(/^(\d\d?)/),o.year)),r.yy=s.cache(s.process(s.rtoken(/^(\d\d)/),o.year)),r.yyy=s.cache(s.process(s.rtoken(/^(\d\d?\d?\d?)/),o.year)),r.yyyy=s.cache(s.process(s.rtoken(/^(\d\d\d\d)/),o.year)),n=function(){return s.each(s.any.apply(null,arguments),s.not(r.ctoken2("timeContext")))},r.day=n(r.d,r.dd),r.month=n(r.M,r.MMM),r.year=n(r.yyyy,r.yy),r.orientation=s.process(r.ctoken("past future"),function(e){return function(){this.orient=e}}),r.operator=s.process(r.ctoken("add subtract"),function(e){return function(){this.operator=e}}),r.rday=s.process(r.ctoken("yesterday tomorrow today now"),o.rday),r.unit=s.process(r.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),r.value=s.process(s.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),r.expression=s.set([r.rday,r.operator,r.value,r.unit,r.orientation,r.ddd,r.MMM]),n=function(){return s.set(arguments,r.datePartDelimiter)},r.mdy=n(r.ddd,r.month,r.day,r.year),r.ymd=n(r.ddd,r.year,r.month,r.day),r.dmy=n(r.ddd,r.day,r.month,r.year),r.date=function(e){return(r[t.dateElementOrder]||r.mdy).call(this,e)},r.format=s.process(s.many(s.any(s.process(s.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(r[t])return r[t];throw e.Parsing.Exception(t)}),s.process(s.rtoken(/^[^dMyhHmstz]+/),function(e){return s.ignore(s.stoken(e))}))),function(e){return s.process(s.each.apply(null,e),o.finishExact)});var l={},c=function(e){return l[e]=l[e]||r.format(e)[0]};r.formats=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(c(e[i]));return s.any.apply(null,t)}return c(e)},r._formats=r.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),r._start=s.process(s.set([r.date,r.time,r.expression],r.generalDelimiter,r.whiteSpace),o.finish),r.start=function(e){try{var t=r._formats.call({},e);if(0===t[1].length)return t}catch(i){}return r._start.call({},e)},e._parse=e.parse,e.parse=function(t){var i=null;if(!t)return null;if(t instanceof Date)return t;try{i=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(n){return null}return 0===i[1].length?i[0]:null},e.getParseFunction=function(t){var i=e.Grammar.formats(t);return function(e){var t=null;try{t=i.call({},e)}catch(n){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,i){return e.getParseFunction(i)(t)}}();